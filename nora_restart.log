/mnt/c/Users/PC/PYTHON/Auraai2/clientes/aura/routes/debug_verificar.py:7: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
ğŸ” REDIRECT_URI en uso: http://localhost:5000/login/google/callback
âœ… supabase_client.py cargado correctamente y cliente listo
âœ… Tipo de supabase: <class 'supabase.client.Client'>
âœ… MÃ©todos de supabase: ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_get_auth_headers', '_init_postgrest_client', '_init_storage_client', '_init_supabase_auth_client', 'auth', 'auth_url', 'from_', 'functions', 'functions_url', 'postgrest', 'realtime', 'realtime_url', 'rest_url', 'rpc', 'schema', 'storage', 'storage_url', 'supabase_key', 'supabase_url', 'table']
âœ… registro_base.py cargado correctamente
ğŸ”„ Cargando rutas bÃ¡sicas de reportes_meta_ads...
âœ… Rutas bÃ¡sicas de reportes_meta_ads cargadas
âœ… process_message.py cargado correctamente al chile y ajustado para actualizaciÃ³n real
âœ… registro_admin.py cargado correctamente
âœ… admin_noras.py cargado correctamente
âœ… admin_nora.py cargado correctamente
âœ… admin_nora_dashboard.py cargado correctamente
âœ… debug_verificar.py cargado correctamente
âœ… MÃ³dulo debug_oauthlib.py cargado correctamente.
âœ… admin_actualizar_contactos.py cargado correctamente
âœ… panel_cliente.py cargado correctamente
âœ… panel_cliente_contactos.py cargado correctamente
âœ… Blueprint de contactos cargado como '/contactos'
âœ… panel_cliente_envios.py cargado correctamente
âœ… panel_cliente_ia.py cargado correctamente
âœ… panel_cliente_respuestas.py cargado correctamente
âœ… __init__.py del panel_chat cargado correctamente
âœ… vista_enviar_mensaje.py cargado correctamente (supabase actualizado)
ğŸ§© cargando tareas_crud.py...
ğŸš€ Cliente WhatsApp Web inicializado para https://whatsapp-server-production-7e82.up.railway.app
âœ… admin_verificador_rutas.py cargado correctamente
âœ… cliente_nora.py cargado correctamente
âœ… cliente_nora_bp importado correctamente
âœ… panel_cliente_ads_bp importado correctamente
âœ… cobranza_bp importado correctamente
âœ… panel_team_bp importado correctamente
âš ï¸ No se pudo importar 'fpdf2': No module named 'fpdf2'
>>> vista_presupuesto_nuevo.py importado
âœ… panel_cliente_pagos_presupuestos_bp importado correctamente
âœ… panel_cliente_pagos_presupuesto_nuevo_bp importado correctamente
âœ… panel_tareas_completadas_bp importado correctamente
âœ… reportes_meta_ads_bp importado correctamente (optimizado)
âœ… campanas_meta_ads_bp importado correctamente
DEBUG: Objeto config_class ANTES de from_object: <class 'clientes.aura.app_config.Config'>
DEBUG: config_class TIENE SESSION_COOKIE_NAME: aura_multinora_cookie
DEBUG: SESSION_COOKIE_NAME configurado como: aura_multinora_cookie
DEBUG: SECRET_KEY DESPUÃ‰S de from_object: 1002ivimyH!
DEBUG: SESSION_TYPE DESPUÃ‰S de from_object: filesystem
ğŸª ConfiguraciÃ³n de cookies optimizada para navegador
ğŸš€ AplicaciÃ³n Flask creada y configuraciÃ³n inicial cargada por la factory.
ProxyFix y PREFERRED_URL_SCHEME configurados para https.
Extensiones Flask-Session y Flask-SocketIO inicializadas.
Handler de logging para errores de app configurado (error.log).
Filtro de logging para Werkzeug aÃ±adido.
Handler de logging para socketio_polling configurado (logs/socketio_polling.log).
Nivel de logging para twilio.http_client establecido a WARNING.
ğŸ•’ Inicializando cron jobs...
âœ… Cron jobs registrados.
APScheduler iniciado y cron jobs registrados correctamente.
Iniciando registro de Blueprints...
âœ… Blueprint 'login' registrado con nombre 'login' y prefijo '/login'
âœ… Blueprint 'simple_login' registrado con nombre 'simple_login' y prefijo '/login'
âœ… Blueprint 'webhook' registrado con nombre 'webhook' y prefijo ''
âœ… Blueprint 'admin_noras' registrado con nombre 'admin_noras' y prefijo ''
âœ… Blueprint 'admin_dashboard' registrado con nombre 'admin_dashboard' y prefijo '/admin'
âœ… Blueprint 'admin_nora' registrado con nombre 'admin_nora' y prefijo '/admin/nora'
âœ… Blueprint 'admin_nora_dashboard' registrado con nombre 'admin_nora_dashboard' y prefijo '/admin/nora/dashboard'
âœ… Blueprint 'admin_debug_master' registrado con nombre 'admin_debug_master' y prefijo '/admin/debug'
âœ… Blueprint 'admin_modulos' registrado con nombre 'admin_modulos' y prefijo '/admin/modulos'
âœ… Blueprint 'admin_actualizar_contactos' registrado con nombre 'admin_actualizar_contactos' y prefijo '/admin/actualizar_contactos'
âœ… Blueprint 'debug_session_bp' registrado con nombre 'debug_session_bp' y prefijo '/debug'
âœ… Blueprint 'debug_verificador' registrado con nombre 'debug_verificador' y prefijo ''
âœ… Invitado blueprints registrados (no hay rutas por ahora)
Registro de Blueprints completado.
Nora(s) encontradas en Supabase para registro dinÃ¡mico: ['aura']
ğŸ” Registrando blueprints dinÃ¡micos para aura...
ğŸ§ª Registrando panel_cliente para aura
âœ… Blueprint 'panel_cliente_aura' registrado con nombre 'panel_cliente_aura' y prefijo '/panel_cliente/aura'
âœ… Blueprint 'panel_cliente_entrenamiento' registrado con nombre 'panel_cliente_entrenamiento' y prefijo '/panel_cliente/aura/entrenamiento'
âœ… Blueprint 'panel_cliente_contactos' registrado con nombre 'panel_cliente_contactos' y prefijo '/panel_cliente/aura/contactos'
âœ… Blueprint 'webhook_contactos' registrado con nombre 'webhook_contactos' y prefijo '/'
ğŸ§ª MÃ³dulos activos normalizados para aura: ['contactos', 'entrenamiento', 'pagos', 'chat', 'google_ads', 'meta_ads', 'clientes', 'qr_whatsapp_web', 'tareas', 'cursos']
âœ… Blueprint 'panel_cliente_pagos' registrado con nombre 'panel_cliente_pagos' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_servicios' registrado con nombre 'panel_cliente_pagos_servicios' y prefijo '/panel_cliente/aura/pagos/servicios'
âœ… Blueprint 'panel_cliente_pagos_nuevo' registrado con nombre 'panel_cliente_pagos_nuevo' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_recibo' registrado con nombre 'panel_cliente_pagos_recibo' y prefijo ''
âœ… Blueprint 'panel_cliente_tareas' registrado con nombre 'panel_cliente_tareas' y prefijo '/panel_cliente/aura/tareas'
âš ï¸ Blueprint 'panel_tareas_gestionar_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_recurrentes_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_crud' ya estaba registrado.
Registrando blueprint META ADS para aura
âœ… Blueprint 'panel_cliente_ads' registrado con nombre 'panel_cliente_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'reportes_meta_ads' registrado con nombre 'reportes_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
ğŸ”„ Cargando estadÃ­sticas_ads_bp bajo demanda...
âœ… estadisticas_ads_bp cargado exitosamente
âœ… Blueprint 'estadisticas_ads_bp' registrado con nombre 'estadisticas_ads_bp' y prefijo ''
âœ… Blueprint 'campanas_meta_ads' registrado con nombre 'campanas_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads' registrado con nombre 'panel_cliente_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads_sincronizacion' registrado con nombre 'panel_cliente_meta_ads_sincronizacion' y prefijo '/panel_cliente/aura/meta_ads'
Registrando blueprint GOOGLE ADS para aura
âœ… Blueprint 'panel_cliente_google_ads' registrado con nombre 'panel_cliente_google_ads' y prefijo '/panel_cliente/aura/google_ads'
âš ï¸ Blueprint 'panel_cliente_contactos' ya estaba registrado.
âœ… Blueprint 'panel_cliente_clientes_bp' registrado con nombre 'panel_cliente_clientes_bp' y prefijo '/panel_cliente/aura/clientes'
Registrando blueprint CURSOS para aura
âœ… Blueprint 'panel_cliente_cursos' registrado con nombre 'panel_cliente_cursos' y prefijo ''
Registrando blueprint QR WHATSAPP WEB WEBSOCKET para aura
âœ… Blueprint 'panel_cliente_whatsapp_web' registrado con nombre 'panel_cliente_whatsapp_web' y prefijo '/panel_cliente/aura/whatsapp'
âœ… Blueprint WhatsApp Web WebSocket registrado exitosamente

ğŸ§ª Resultado del registro de mÃ³dulos para: aura
âš ï¸ contactos              â†’ No definida en verificador
âš ï¸ entrenamiento          â†’ No definida en verificador
âŒ pagos                  â†’ NO registrado â›” (/panel_cliente/aura/pagos)
âš ï¸ chat                   â†’ No definida en verificador
âŒ google_ads             â†’ NO registrado â›” (/panel_cliente/aura/google_ads)
âŒ meta_ads               â†’ NO registrado â›” (/panel_cliente/aura/meta_ads)
âŒ clientes               â†’ NO registrado â›” (/panel_cliente/aura/clientes)
âŒ qr_whatsapp_web        â†’ NO registrado â›” (/panel_cliente/aura/whatsapp)
âŒ tareas                 â†’ NO registrado â›” (/panel_cliente/aura/tareas)
âŒ cursos                 â†’ NO registrado â›” (/panel_cliente/aura/cursos)

ğŸ§ª Rutas registradas relacionadas con google_ads:
  - /panel_cliente/aura/google_ads/<nombre_nora>/actualizar_empresa â†’ panel_cliente_google_ads.actualizar_empresa
  - /panel_cliente/aura/google_ads/actualizar_empresa â†’ panel_cliente_google_ads.actualizar_empresa
  - /panel_cliente/aura/google_ads/<nombre_nora>/ â†’ panel_cliente_google_ads.panel_google_ads
  - /panel_cliente/aura/google_ads/ â†’ panel_cliente_google_ads.panel_google_ads
  - /panel_cliente/aura/google_ads/cuentas â†’ panel_cliente_google_ads.vista_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias â†’ panel_cliente_google_ads.vista_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/actualizar â†’ panel_cliente_google_ads.actualizar_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/importar_desde_google_ads â†’ panel_cliente_google_ads.importar_cuentas_desde_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/vincular_empresa â†’ panel_cliente_google_ads.vincular_empresa_a_cuenta_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/ads_activos â†’ panel_cliente_google_ads.obtener_ads_activos_endpoint_google_ads
  - /panel_cliente/aura/google_ads/cuenta â†’ panel_cliente_google_ads.ficha_cuenta_publicitaria_google_ads
  - /panel_cliente/aura/google_ads/agregar_cuenta â†’ panel_cliente_google_ads.agregar_cuenta_google_ads
  - /panel_cliente/aura/google_ads/google_ads/anuncios_activos_json â†’ panel_cliente_google_ads.anuncios_activos_json
  - /panel_cliente/aura/google_ads/reportes â†’ panel_cliente_google_ads.vista_reportes_google_ads
  - /panel_cliente/aura/google_ads/campanas â†’ panel_cliente_google_ads.vista_campanas_google_ads
  - /panel_cliente/aura/google_ads/campanas_activas_google_ads â†’ panel_cliente_google_ads.campanas_activas_google_ads
  - /panel_cliente/aura/google_ads/panel_cliente/google_ads/campaÃ±as_activas â†’ panel_cliente_google_ads.campaÃ±as_activas_api
  - /panel_cliente/aura/google_ads/reporte_google_ads â†’ panel_cliente_google_ads.reporte_google_ads
  - /panel_cliente/aura/google_ads/ver_cuentas_google_ads â†’ panel_cliente_google_ads.ver_cuentas_google_ads
  - /panel_cliente/aura/google_ads/<nombre_nora>/importar_cuentas_automatico â†’ panel_cliente_google_ads.importar_cuentas_automatico
  - /panel_cliente/aura/google_ads/importar_cuentas_automatico â†’ panel_cliente_google_ads.importar_cuentas_automatico
  - /panel_cliente/aura/google_ads/<nombre_nora>/test_simple_insert â†’ panel_cliente_google_ads.test_simple_insert
  - /panel_cliente/aura/google_ads/test_simple_insert â†’ panel_cliente_google_ads.test_simple_insert
  - /panel_cliente/aura/google_ads/<nombre_nora>/reporte/<customer_id> â†’ panel_cliente_google_ads.reporte_detallado_google_ads
  - /panel_cliente/aura/clientes/empresa/<empresa_id>/agregar_cuenta_google_ads â†’ panel_cliente_clientes_bp.agregar_cuenta_google_ads_empresa
Registro de Blueprints completado.
âœ… Blueprint 'panel_team' registrado con nombre 'panel_team' y prefijo '/panel_team'
âœ… Blueprint 'panel_cliente_pagos_presupuestos' registrado con nombre 'panel_cliente_pagos_presupuestos' y prefijo '/panel_cliente'
âœ… Blueprint 'panel_cliente_pagos_presupuesto_nuevo' registrado con nombre 'panel_cliente_pagos_presupuesto_nuevo' y prefijo '/panel_cliente'
âœ… Blueprint 'panel_tareas_completadas_bp' registrado con nombre 'panel_tareas_completadas_bp' y prefijo '/panel_cliente'
âš ï¸ Blueprint 'reportes_meta_ads' ya estaba registrado.
âœ… reportes_meta_ads_bp registrado correctamente (optimizado)
âš ï¸ Blueprint 'campanas_meta_ads' ya estaba registrado.
âš ï¸  Saltando carga de blueprint de Google Ads para diagnÃ³stico...
Registrando blueprint cliente_nora_bp...
âœ… Blueprint 'cliente_nora' registrado con nombre 'cliente_nora' y prefijo ''
âœ… Blueprint cliente_nora_bp registrado correctamente
Definiendo rutas de nivel de aplicaciÃ³n...
Definiendo ruta raÃ­z (/)
Definiendo ruta logout (/logout)
Definiendo ruta pÃºblica para reportes compartidos...
Definiendo before_request handler...
âœ… Rutas de nivel de aplicaciÃ³n definidas
Iniciando cron de tareas recurrentes...
[CRON] Inicializando BackgroundScheduler...
[CRON] Scheduler creado, aÃ±adiendo jobs...
[CRON] Jobs aÃ±adidos, iniciando scheduler...
ğŸ”„ Cron iniciado en hilo separado
âœ… AplicaciÃ³n Flask configurada completamente
 * Serving Flask app 'clientes.aura'
 * Debug mode: on
/mnt/c/Users/PC/PYTHON/Auraai2/clientes/aura/routes/debug_verificar.py:7: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
ğŸ” REDIRECT_URI en uso: http://localhost:5000/login/google/callback
âœ… supabase_client.py cargado correctamente y cliente listo
âœ… Tipo de supabase: <class 'supabase.client.Client'>
âœ… MÃ©todos de supabase: ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_get_auth_headers', '_init_postgrest_client', '_init_storage_client', '_init_supabase_auth_client', 'auth', 'auth_url', 'from_', 'functions', 'functions_url', 'postgrest', 'realtime', 'realtime_url', 'rest_url', 'rpc', 'schema', 'storage', 'storage_url', 'supabase_key', 'supabase_url', 'table']
âœ… registro_base.py cargado correctamente
ğŸ”„ Cargando rutas bÃ¡sicas de reportes_meta_ads...
âœ… Rutas bÃ¡sicas de reportes_meta_ads cargadas
âœ… process_message.py cargado correctamente al chile y ajustado para actualizaciÃ³n real
âœ… registro_admin.py cargado correctamente
âœ… admin_noras.py cargado correctamente
âœ… admin_nora.py cargado correctamente
âœ… admin_nora_dashboard.py cargado correctamente
âœ… debug_verificar.py cargado correctamente
âœ… MÃ³dulo debug_oauthlib.py cargado correctamente.
âœ… admin_actualizar_contactos.py cargado correctamente
âœ… panel_cliente.py cargado correctamente
âœ… panel_cliente_contactos.py cargado correctamente
âœ… Blueprint de contactos cargado como '/contactos'
âœ… panel_cliente_envios.py cargado correctamente
âœ… panel_cliente_ia.py cargado correctamente
âœ… panel_cliente_respuestas.py cargado correctamente
âœ… __init__.py del panel_chat cargado correctamente
âœ… vista_enviar_mensaje.py cargado correctamente (supabase actualizado)
ğŸ§© cargando tareas_crud.py...
ğŸš€ Cliente WhatsApp Web inicializado para https://whatsapp-server-production-7e82.up.railway.app
âœ… admin_verificador_rutas.py cargado correctamente
âœ… cliente_nora.py cargado correctamente
âœ… cliente_nora_bp importado correctamente
âœ… panel_cliente_ads_bp importado correctamente
âœ… cobranza_bp importado correctamente
âœ… panel_team_bp importado correctamente
âš ï¸ No se pudo importar 'fpdf2': No module named 'fpdf2'
>>> vista_presupuesto_nuevo.py importado
âœ… panel_cliente_pagos_presupuestos_bp importado correctamente
âœ… panel_cliente_pagos_presupuesto_nuevo_bp importado correctamente
âœ… panel_tareas_completadas_bp importado correctamente
âœ… reportes_meta_ads_bp importado correctamente (optimizado)
âœ… campanas_meta_ads_bp importado correctamente
DEBUG: Objeto config_class ANTES de from_object: <class 'clientes.aura.app_config.Config'>
DEBUG: config_class TIENE SESSION_COOKIE_NAME: aura_multinora_cookie
DEBUG: SESSION_COOKIE_NAME configurado como: aura_multinora_cookie
DEBUG: SECRET_KEY DESPUÃ‰S de from_object: 1002ivimyH!
DEBUG: SESSION_TYPE DESPUÃ‰S de from_object: filesystem
ğŸª ConfiguraciÃ³n de cookies optimizada para navegador
ğŸš€ AplicaciÃ³n Flask creada y configuraciÃ³n inicial cargada por la factory.
ProxyFix y PREFERRED_URL_SCHEME configurados para https.
Extensiones Flask-Session y Flask-SocketIO inicializadas.
Handler de logging para errores de app configurado (error.log).
Filtro de logging para Werkzeug aÃ±adido.
Handler de logging para socketio_polling configurado (logs/socketio_polling.log).
Nivel de logging para twilio.http_client establecido a WARNING.
ğŸ•’ Inicializando cron jobs...
âœ… Cron jobs registrados.
APScheduler iniciado y cron jobs registrados correctamente.
Iniciando registro de Blueprints...
âœ… Blueprint 'login' registrado con nombre 'login' y prefijo '/login'
âœ… Blueprint 'simple_login' registrado con nombre 'simple_login' y prefijo '/login'
âœ… Blueprint 'webhook' registrado con nombre 'webhook' y prefijo ''
âœ… Blueprint 'admin_noras' registrado con nombre 'admin_noras' y prefijo ''
âœ… Blueprint 'admin_dashboard' registrado con nombre 'admin_dashboard' y prefijo '/admin'
âœ… Blueprint 'admin_nora' registrado con nombre 'admin_nora' y prefijo '/admin/nora'
âœ… Blueprint 'admin_nora_dashboard' registrado con nombre 'admin_nora_dashboard' y prefijo '/admin/nora/dashboard'
âœ… Blueprint 'admin_debug_master' registrado con nombre 'admin_debug_master' y prefijo '/admin/debug'
âœ… Blueprint 'admin_modulos' registrado con nombre 'admin_modulos' y prefijo '/admin/modulos'
âœ… Blueprint 'admin_actualizar_contactos' registrado con nombre 'admin_actualizar_contactos' y prefijo '/admin/actualizar_contactos'
âœ… Blueprint 'debug_session_bp' registrado con nombre 'debug_session_bp' y prefijo '/debug'
âœ… Blueprint 'debug_verificador' registrado con nombre 'debug_verificador' y prefijo ''
âœ… Invitado blueprints registrados (no hay rutas por ahora)
Registro de Blueprints completado.
Nora(s) encontradas en Supabase para registro dinÃ¡mico: ['aura']
ğŸ” Registrando blueprints dinÃ¡micos para aura...
ğŸ§ª Registrando panel_cliente para aura
âœ… Blueprint 'panel_cliente_aura' registrado con nombre 'panel_cliente_aura' y prefijo '/panel_cliente/aura'
âœ… Blueprint 'panel_cliente_entrenamiento' registrado con nombre 'panel_cliente_entrenamiento' y prefijo '/panel_cliente/aura/entrenamiento'
âœ… Blueprint 'panel_cliente_contactos' registrado con nombre 'panel_cliente_contactos' y prefijo '/panel_cliente/aura/contactos'
âœ… Blueprint 'webhook_contactos' registrado con nombre 'webhook_contactos' y prefijo '/'
ğŸ§ª MÃ³dulos activos normalizados para aura: ['contactos', 'entrenamiento', 'pagos', 'chat', 'google_ads', 'meta_ads', 'clientes', 'qr_whatsapp_web', 'tareas', 'cursos']
âœ… Blueprint 'panel_cliente_pagos' registrado con nombre 'panel_cliente_pagos' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_servicios' registrado con nombre 'panel_cliente_pagos_servicios' y prefijo '/panel_cliente/aura/pagos/servicios'
âœ… Blueprint 'panel_cliente_pagos_nuevo' registrado con nombre 'panel_cliente_pagos_nuevo' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_recibo' registrado con nombre 'panel_cliente_pagos_recibo' y prefijo ''
âœ… Blueprint 'panel_cliente_tareas' registrado con nombre 'panel_cliente_tareas' y prefijo '/panel_cliente/aura/tareas'
âš ï¸ Blueprint 'panel_tareas_gestionar_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_recurrentes_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_crud' ya estaba registrado.
Registrando blueprint META ADS para aura
âœ… Blueprint 'panel_cliente_ads' registrado con nombre 'panel_cliente_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'reportes_meta_ads' registrado con nombre 'reportes_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
ğŸ”„ Cargando estadÃ­sticas_ads_bp bajo demanda...
âœ… estadisticas_ads_bp cargado exitosamente
âœ… Blueprint 'estadisticas_ads_bp' registrado con nombre 'estadisticas_ads_bp' y prefijo ''
âœ… Blueprint 'campanas_meta_ads' registrado con nombre 'campanas_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads' registrado con nombre 'panel_cliente_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads_sincronizacion' registrado con nombre 'panel_cliente_meta_ads_sincronizacion' y prefijo '/panel_cliente/aura/meta_ads'
Registrando blueprint GOOGLE ADS para aura
âœ… Blueprint 'panel_cliente_google_ads' registrado con nombre 'panel_cliente_google_ads' y prefijo '/panel_cliente/aura/google_ads'
âš ï¸ Blueprint 'panel_cliente_contactos' ya estaba registrado.
âœ… Blueprint 'panel_cliente_clientes_bp' registrado con nombre 'panel_cliente_clientes_bp' y prefijo '/panel_cliente/aura/clientes'
Registrando blueprint CURSOS para aura
âœ… Blueprint 'panel_cliente_cursos' registrado con nombre 'panel_cliente_cursos' y prefijo ''
Registrando blueprint QR WHATSAPP WEB WEBSOCKET para aura
âœ… Blueprint 'panel_cliente_whatsapp_web' registrado con nombre 'panel_cliente_whatsapp_web' y prefijo '/panel_cliente/aura/whatsapp'
âœ… Blueprint WhatsApp Web WebSocket registrado exitosamente

ğŸ§ª Resultado del registro de mÃ³dulos para: aura
2025-07-06 13:50:10,704 - INFO - ğŸŒ Accediendo a dashboard WhatsApp Web para: None
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸŒ Accediendo a dashboard WhatsApp Web para: None
2025-07-06 13:50:10,705 - INFO - ğŸ”„ Obteniendo cliente WhatsApp...
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ”„ Obteniendo cliente WhatsApp...
2025-07-06 13:50:10,720 - INFO - âœ… Cliente WebSocket WhatsApp Web creado exitosamente
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:âœ… Cliente WebSocket WhatsApp Web creado exitosamente
2025-07-06 13:50:10,721 - INFO - âœ… Cliente obtenido: <class 'clientes.aura.utils.whatsapp_websocket_client.WhatsAppWebSocketClient'>
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:âœ… Cliente obtenido: <class 'clientes.aura.utils.whatsapp_websocket_client.WhatsAppWebSocketClient'>
2025-07-06 13:50:10,722 - INFO - ğŸ¥ Obteniendo health status...
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ¥ Obteniendo health status...
2025-07-06 13:50:10,967 - INFO - â¤ï¸ Health status: {'status': 'ok', 'timestamp': '2025-07-06T13:50:10.965541', 'message': 'Backend funcionando'}
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:â¤ï¸ Health status: {'status': 'ok', 'timestamp': '2025-07-06T13:50:10.965541', 'message': 'Backend funcionando'}
2025-07-06 13:50:10,968 - INFO - ğŸ“Š Obteniendo detailed status...
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ“Š Obteniendo detailed status...
2025-07-06 13:50:10,968 - INFO - ğŸ“‹ Detailed status: {'connected': False, 'authenticated': False, 'session_active': False, 'session_id': None, 'has_qr': False, 'backend_type': 'websocket'}
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ“‹ Detailed status: {'connected': False, 'authenticated': False, 'session_active': False, 'session_id': None, 'has_qr': False, 'backend_type': 'websocket'}
2025-07-06 13:50:10,969 - INFO - ğŸ”— Client status: {'connected': False, 'authenticated': False, 'session_active': False, 'session_id': None, 'has_qr': False, 'backend_type': 'websocket'}
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ”— Client status: {'connected': False, 'authenticated': False, 'session_active': False, 'session_id': None, 'has_qr': False, 'backend_type': 'websocket'}
2025-07-06 13:50:10,969 - INFO - ğŸ¨ Renderizando template...
INFO:clientes.aura.routes.panel_cliente_whatsapp_web.panel_cliente_whatsapp_websocket:ğŸ¨ Renderizando template...
âš ï¸ contactos              â†’ No definida en verificador
âš ï¸ entrenamiento          â†’ No definida en verificador
âŒ pagos                  â†’ NO registrado â›” (/panel_cliente/aura/pagos)
âš ï¸ chat                   â†’ No definida en verificador
âŒ google_ads             â†’ NO registrado â›” (/panel_cliente/aura/google_ads)
âŒ meta_ads               â†’ NO registrado â›” (/panel_cliente/aura/meta_ads)
âŒ clientes               â†’ NO registrado â›” (/panel_cliente/aura/clientes)
âŒ qr_whatsapp_web        â†’ NO registrado â›” (/panel_cliente/aura/whatsapp)
âŒ tareas                 â†’ NO registrado â›” (/panel_cliente/aura/tareas)
âŒ cursos                 â†’ NO registrado â›” (/panel_cliente/aura/cursos)

ğŸ§ª Rutas registradas relacionadas con google_ads:
  - /panel_cliente/aura/google_ads/<nombre_nora>/actualizar_empresa â†’ panel_cliente_google_ads.actualizar_empresa
  - /panel_cliente/aura/google_ads/actualizar_empresa â†’ panel_cliente_google_ads.actualizar_empresa
  - /panel_cliente/aura/google_ads/<nombre_nora>/ â†’ panel_cliente_google_ads.panel_google_ads
  - /panel_cliente/aura/google_ads/ â†’ panel_cliente_google_ads.panel_google_ads
  - /panel_cliente/aura/google_ads/cuentas â†’ panel_cliente_google_ads.vista_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias â†’ panel_cliente_google_ads.vista_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/actualizar â†’ panel_cliente_google_ads.actualizar_cuentas_publicitarias_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/importar_desde_google_ads â†’ panel_cliente_google_ads.importar_cuentas_desde_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/vincular_empresa â†’ panel_cliente_google_ads.vincular_empresa_a_cuenta_google_ads
  - /panel_cliente/aura/google_ads/cuentas_publicitarias/ads_activos â†’ panel_cliente_google_ads.obtener_ads_activos_endpoint_google_ads
  - /panel_cliente/aura/google_ads/cuenta â†’ panel_cliente_google_ads.ficha_cuenta_publicitaria_google_ads
  - /panel_cliente/aura/google_ads/agregar_cuenta â†’ panel_cliente_google_ads.agregar_cuenta_google_ads
  - /panel_cliente/aura/google_ads/google_ads/anuncios_activos_json â†’ panel_cliente_google_ads.anuncios_activos_json
  - /panel_cliente/aura/google_ads/reportes â†’ panel_cliente_google_ads.vista_reportes_google_ads
  - /panel_cliente/aura/google_ads/campanas â†’ panel_cliente_google_ads.vista_campanas_google_ads
  - /panel_cliente/aura/google_ads/campanas_activas_google_ads â†’ panel_cliente_google_ads.campanas_activas_google_ads
  - /panel_cliente/aura/google_ads/panel_cliente/google_ads/campaÃ±as_activas â†’ panel_cliente_google_ads.campaÃ±as_activas_api
  - /panel_cliente/aura/google_ads/reporte_google_ads â†’ panel_cliente_google_ads.reporte_google_ads
  - /panel_cliente/aura/google_ads/ver_cuentas_google_ads â†’ panel_cliente_google_ads.ver_cuentas_google_ads
  - /panel_cliente/aura/google_ads/<nombre_nora>/importar_cuentas_automatico â†’ panel_cliente_google_ads.importar_cuentas_automatico
  - /panel_cliente/aura/google_ads/importar_cuentas_automatico â†’ panel_cliente_google_ads.importar_cuentas_automatico
  - /panel_cliente/aura/google_ads/<nombre_nora>/test_simple_insert â†’ panel_cliente_google_ads.test_simple_insert
  - /panel_cliente/aura/google_ads/test_simple_insert â†’ panel_cliente_google_ads.test_simple_insert
  - /panel_cliente/aura/google_ads/<nombre_nora>/reporte/<customer_id> â†’ panel_cliente_google_ads.reporte_detallado_google_ads
  - /panel_cliente/aura/clientes/empresa/<empresa_id>/agregar_cuenta_google_ads â†’ panel_cliente_clientes_bp.agregar_cuenta_google_ads_empresa
Registro de Blueprints completado.
âœ… Blueprint 'panel_team' registrado con nombre 'panel_team' y prefijo '/panel_team'
âœ… Blueprint 'panel_cliente_pagos_presupuestos' registrado con nombre 'panel_cliente_pagos_presupuestos' y prefijo '/panel_cliente'
âœ… Blueprint 'panel_cliente_pagos_presupuesto_nuevo' registrado con nombre 'panel_cliente_pagos_presupuesto_nuevo' y prefijo '/panel_cliente'
âœ… Blueprint 'panel_tareas_completadas_bp' registrado con nombre 'panel_tareas_completadas_bp' y prefijo '/panel_cliente'
âš ï¸ Blueprint 'reportes_meta_ads' ya estaba registrado.
âœ… reportes_meta_ads_bp registrado correctamente (optimizado)
âš ï¸ Blueprint 'campanas_meta_ads' ya estaba registrado.
âš ï¸  Saltando carga de blueprint de Google Ads para diagnÃ³stico...
Registrando blueprint cliente_nora_bp...
âœ… Blueprint 'cliente_nora' registrado con nombre 'cliente_nora' y prefijo ''
âœ… Blueprint cliente_nora_bp registrado correctamente
Definiendo rutas de nivel de aplicaciÃ³n...
Definiendo ruta raÃ­z (/)
Definiendo ruta logout (/logout)
Definiendo ruta pÃºblica para reportes compartidos...
Definiendo before_request handler...
âœ… Rutas de nivel de aplicaciÃ³n definidas
Iniciando cron de tareas recurrentes...
[CRON] Inicializando BackgroundScheduler...
[CRON] Scheduler creado, aÃ±adiendo jobs...
[CRON] Jobs aÃ±adidos, iniciando scheduler...
ğŸ”„ Cron iniciado en hilo separado
âœ… AplicaciÃ³n Flask configurada completamente
[CRON] âœ… BackgroundScheduler iniciado correctamente
âœ… Cron de tareas recurrentes iniciado correctamente
ğŸ”— WhatsApp WebSocket Client: https://whatsapp-server-production-8f61.up.railway.app
ğŸ¥ Health check: https://whatsapp-server-production-8f61.up.railway.app/health
âœ… Backend OK (HTML)
Exception ignored in: <function _removeHandlerRef at 0x787386924c20>
Traceback (most recent call last):
  File "/usr/lib/python3.12/logging/__init__.py", line 884, in _removeHandlerRef
  File "/usr/lib/python3.12/logging/__init__.py", line 241, in _acquireLock
  File "/usr/lib/python3.12/threading.py", line 198, in acquire
TypeError: 'NoneType' object is not callable
/mnt/c/Users/PC/PYTHON/Auraai2/clientes/aura/routes/debug_verificar.py:7: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
ğŸ” REDIRECT_URI en uso: http://localhost:5000/login/google/callback
âœ… supabase_client.py cargado correctamente y cliente listo
âœ… Tipo de supabase: <class 'supabase.client.Client'>
âœ… MÃ©todos de supabase: ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_get_auth_headers', '_init_postgrest_client', '_init_storage_client', '_init_supabase_auth_client', 'auth', 'auth_url', 'from_', 'functions', 'functions_url', 'postgrest', 'realtime', 'realtime_url', 'rest_url', 'rpc', 'schema', 'storage', 'storage_url', 'supabase_key', 'supabase_url', 'table']
âœ… registro_base.py cargado correctamente
ğŸ”„ Cargando rutas bÃ¡sicas de reportes_meta_ads...
âœ… Rutas bÃ¡sicas de reportes_meta_ads cargadas
âœ… process_message.py cargado correctamente al chile y ajustado para actualizaciÃ³n real
âœ… registro_admin.py cargado correctamente
âœ… admin_noras.py cargado correctamente
âœ… admin_nora.py cargado correctamente
âœ… admin_nora_dashboard.py cargado correctamente
âœ… debug_verificar.py cargado correctamente
âœ… MÃ³dulo debug_oauthlib.py cargado correctamente.
âœ… admin_actualizar_contactos.py cargado correctamente
âœ… panel_cliente.py cargado correctamente
âœ… panel_cliente_contactos.py cargado correctamente
âœ… Blueprint de contactos cargado como '/contactos'
âœ… panel_cliente_envios.py cargado correctamente
âœ… panel_cliente_ia.py cargado correctamente
âœ… panel_cliente_respuestas.py cargado correctamente
âœ… __init__.py del panel_chat cargado correctamente
âœ… vista_enviar_mensaje.py cargado correctamente (supabase actualizado)
ğŸ§© cargando tareas_crud.py...
ğŸš€ Cliente WhatsApp Web inicializado para https://whatsapp-server-production-7e82.up.railway.app
âœ… admin_verificador_rutas.py cargado correctamente
âœ… cliente_nora.py cargado correctamente
âœ… cliente_nora_bp importado correctamente
âœ… panel_cliente_ads_bp importado correctamente
âœ… cobranza_bp importado correctamente
âœ… panel_team_bp importado correctamente
âš ï¸ No se pudo importar 'fpdf2': No module named 'fpdf2'
>>> vista_presupuesto_nuevo.py importado
âœ… panel_cliente_pagos_presupuestos_bp importado correctamente
âœ… panel_cliente_pagos_presupuesto_nuevo_bp importado correctamente
âœ… panel_tareas_completadas_bp importado correctamente
âœ… reportes_meta_ads_bp importado correctamente (optimizado)
âœ… campanas_meta_ads_bp importado correctamente
DEBUG: Objeto config_class ANTES de from_object: <class 'clientes.aura.app_config.Config'>
DEBUG: config_class TIENE SESSION_COOKIE_NAME: aura_multinora_cookie
DEBUG: SESSION_COOKIE_NAME configurado como: aura_multinora_cookie
DEBUG: SECRET_KEY DESPUÃ‰S de from_object: 1002ivimyH!
DEBUG: SESSION_TYPE DESPUÃ‰S de from_object: filesystem
ğŸª ConfiguraciÃ³n de cookies optimizada para navegador
ğŸš€ AplicaciÃ³n Flask creada y configuraciÃ³n inicial cargada por la factory.
ProxyFix y PREFERRED_URL_SCHEME configurados para https.
Extensiones Flask-Session y Flask-SocketIO inicializadas.
Handler de logging para errores de app configurado (error.log).
Filtro de logging para Werkzeug aÃ±adido.
Handler de logging para socketio_polling configurado (logs/socketio_polling.log).
Nivel de logging para twilio.http_client establecido a WARNING.
ğŸ•’ Inicializando cron jobs...
âœ… Cron jobs registrados.
APScheduler iniciado y cron jobs registrados correctamente.
Iniciando registro de Blueprints...
âœ… Blueprint 'login' registrado con nombre 'login' y prefijo '/login'
âœ… Blueprint 'simple_login' registrado con nombre 'simple_login' y prefijo '/login'
âœ… Blueprint 'webhook' registrado con nombre 'webhook' y prefijo ''
âœ… Blueprint 'admin_noras' registrado con nombre 'admin_noras' y prefijo ''
âœ… Blueprint 'admin_dashboard' registrado con nombre 'admin_dashboard' y prefijo '/admin'
âœ… Blueprint 'admin_nora' registrado con nombre 'admin_nora' y prefijo '/admin/nora'
âœ… Blueprint 'admin_nora_dashboard' registrado con nombre 'admin_nora_dashboard' y prefijo '/admin/nora/dashboard'
âœ… Blueprint 'admin_debug_master' registrado con nombre 'admin_debug_master' y prefijo '/admin/debug'
âœ… Blueprint 'admin_modulos' registrado con nombre 'admin_modulos' y prefijo '/admin/modulos'
âœ… Blueprint 'admin_actualizar_contactos' registrado con nombre 'admin_actualizar_contactos' y prefijo '/admin/actualizar_contactos'
âœ… Blueprint 'debug_session_bp' registrado con nombre 'debug_session_bp' y prefijo '/debug'
âœ… Blueprint 'debug_verificador' registrado con nombre 'debug_verificador' y prefijo ''
âœ… Invitado blueprints registrados (no hay rutas por ahora)
Registro de Blueprints completado.
Nora(s) encontradas en Supabase para registro dinÃ¡mico: ['aura']
ğŸ” Registrando blueprints dinÃ¡micos para aura...
ğŸ§ª Registrando panel_cliente para aura
âœ… Blueprint 'panel_cliente_aura' registrado con nombre 'panel_cliente_aura' y prefijo '/panel_cliente/aura'
âœ… Blueprint 'panel_cliente_entrenamiento' registrado con nombre 'panel_cliente_entrenamiento' y prefijo '/panel_cliente/aura/entrenamiento'
âœ… Blueprint 'panel_cliente_contactos' registrado con nombre 'panel_cliente_contactos' y prefijo '/panel_cliente/aura/contactos'
âœ… Blueprint 'webhook_contactos' registrado con nombre 'webhook_contactos' y prefijo '/'
ğŸ§ª MÃ³dulos activos normalizados para aura: ['contactos', 'entrenamiento', 'pagos', 'chat', 'google_ads', 'meta_ads', 'clientes', 'qr_whatsapp_web', 'tareas', 'cursos']
âœ… Blueprint 'panel_cliente_pagos' registrado con nombre 'panel_cliente_pagos' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_servicios' registrado con nombre 'panel_cliente_pagos_servicios' y prefijo '/panel_cliente/aura/pagos/servicios'
âœ… Blueprint 'panel_cliente_pagos_nuevo' registrado con nombre 'panel_cliente_pagos_nuevo' y prefijo '/panel_cliente/aura/pagos'
âœ… Blueprint 'panel_cliente_pagos_recibo' registrado con nombre 'panel_cliente_pagos_recibo' y prefijo ''
âœ… Blueprint 'panel_cliente_tareas' registrado con nombre 'panel_cliente_tareas' y prefijo '/panel_cliente/aura/tareas'
âš ï¸ Blueprint 'panel_tareas_gestionar_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_recurrentes_bp' ya estaba registrado.
âš ï¸ Blueprint 'panel_tareas_crud' ya estaba registrado.
Registrando blueprint META ADS para aura
âœ… Blueprint 'panel_cliente_ads' registrado con nombre 'panel_cliente_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'reportes_meta_ads' registrado con nombre 'reportes_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
ğŸ”„ Cargando estadÃ­sticas_ads_bp bajo demanda...
âœ… estadisticas_ads_bp cargado exitosamente
âœ… Blueprint 'estadisticas_ads_bp' registrado con nombre 'estadisticas_ads_bp' y prefijo ''
âœ… Blueprint 'campanas_meta_ads' registrado con nombre 'campanas_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads' registrado con nombre 'panel_cliente_meta_ads' y prefijo '/panel_cliente/aura/meta_ads'
âœ… Blueprint 'panel_cliente_meta_ads_sincronizacion' registrado con nombre 'panel_cliente_meta_ads_sincronizacion' y prefijo '/panel_cliente/aura/meta_ads'
Registrando blueprint GOOGLE ADS para aura
âœ… Blueprint 'panel_cliente_google_ads' registrado con nombre 'panel_cliente_google_ads' y prefijo '/panel_cliente/aura/google_ads'
âš ï¸ Blueprint 'panel_cliente_contactos' ya estaba registrado.
âœ… Blueprint 'panel_cliente_clientes_bp' registrado con nombre 'panel_cliente_clientes_bp' y prefijo '/panel_cliente/aura/clientes'
Registrando blueprint CURSOS para aura
âœ… Blueprint 'panel_cliente_cursos' registrado con nombre 'panel_cliente_cursos' y prefijo ''
Registrando blueprint QR WHATSAPP WEB WEBSOCKET para aura
âœ… Blueprint 'panel_cliente_whatsapp_web' registrado con nombre 'panel_cliente_whatsapp_web' y prefijo '/panel_cliente/aura/whatsapp'
âœ… Blueprint WhatsApp Web WebSocket registrado exitosamente

ğŸ§ª Resultado del registro de mÃ³dulos para: aura
