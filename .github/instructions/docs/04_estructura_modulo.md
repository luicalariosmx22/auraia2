# üóÉÔ∏è Estructura de un m√≥dulo

## üìÅ Estructura est√°ndar:

```bash
clientes/
‚îî‚îÄ‚îÄ aura/
    ‚îú‚îÄ‚îÄ routes/
    ‚îÇ   ‚îî‚îÄ‚îÄ panel_cliente_<modulo>/
    ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ       ‚îî‚îÄ‚îÄ panel_cliente_<modulo>.py
    ‚îî‚îÄ‚îÄ templates/
        ‚îî‚îÄ‚îÄ panel_cliente_<modulo>/
            ‚îî‚îÄ‚îÄ index.html
```

## üéØ Ejemplo completo: m√≥dulo "meta_ads"

### 1. Archivo principal: `panel_cliente_meta_ads.py`

```python
from flask import Blueprint, render_template, request

# üóÑÔ∏è CONTEXTO BD PARA GITHUB COPILOT
from clientes.aura.utils.supabase_schemas import SUPABASE_SCHEMAS
from clientes.aura.utils.quick_schemas import existe, columnas
# BD ACTUAL: Esquemas actualizados autom√°ticamente

"""
üìä TABLAS PRINCIPALES QUE USA ESTE M√ìDULO:

‚Ä¢ meta_ads_anuncios_detalle: M√©tricas detalladas de anuncios
  Campos: ad_id, campana_id, clicks, impresiones, costo, alcance
  
‚Ä¢ meta_ads_cuentas: Cuentas publicitarias conectadas  
  Campos: id_cuenta_publicitaria, nombre_cliente, conectada
  
‚Ä¢ meta_ads_reportes_semanales: Reportes consolidados por semana
  Campos: empresa_id, fecha_inicio, fecha_fin, importe_gastado_anuncios
  
‚Ä¢ meta_plantillas_anuncios: Plantillas para automatizaci√≥n
  Campos: nombre, descripcion, plantilla_json, activa
  
‚Ä¢ facebook_paginas: P√°ginas de Facebook conectadas
  Campos: page_id, nombre_pagina, access_token, activa
  
‚Ä¢ configuracion_bot: Config general de cada Nora
  Campos: nombre_nora, modulos (para verificar si meta_ads est√° activo)
"""

panel_cliente_meta_ads_bp = Blueprint(
    "panel_cliente_meta_ads_bp", __name__,
    url_prefix="/panel_cliente/<nombre_nora>/meta_ads"
)

@panel_cliente_meta_ads_bp.route("/")
def panel_cliente_meta_ads():
    # ‚úÖ Extraer nombre_nora de la URL de forma robusta
    nombre_nora = request.path.split("/")[2]
    return render_template("panel_cliente_meta_ads/index.html", 
                         nombre_nora=nombre_nora)

@panel_cliente_meta_ads_bp.route("/automatizacion")
def panel_automatizacion_campanas():
    nombre_nora = request.path.split("/")[2]
    return render_template("panel_cliente_meta_ads/automatizacion.html",
                         nombre_nora=nombre_nora)

@panel_cliente_meta_ads_bp.route("/reportes")
def reportes_meta_ads():
    nombre_nora = request.path.split("/")[2]
    return render_template("panel_cliente_meta_ads/reportes.html",
                         nombre_nora=nombre_nora)
```

### 2. Template: `index.html`

```html
{% extends "base_cliente.html" %}

{% block titulo %}ÔøΩ Meta Ads - {{ nombre_nora|title }}{% endblock %}

{% block contenido %}
<div class="max-w-4xl mx-auto py-8">
    <div class="bg-white rounded-lg shadow-sm p-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">
            ÔøΩ Meta Ads
        </h1>
        
        <p class="text-gray-600 mb-6">
            Gestiona campa√±as de Facebook e Instagram para {{ nombre_nora|title }}.
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-blue-50 rounded-lg p-4">
                <h3 class="font-semibold text-blue-900">ÔøΩ Campa√±as</h3>
                <p class="text-blue-700 text-sm">Gestiona tus campa√±as publicitarias</p>
            </div>
            
            <div class="bg-green-50 rounded-lg p-4">
                <h3 class="font-semibold text-green-900">ÔøΩ Reportes</h3>
                <p class="text-green-700 text-sm">Analiza el rendimiento de tus anuncios</p>
            </div>
            
            <div class="bg-purple-50 rounded-lg p-4">
                <h3 class="font-semibold text-purple-900">‚öôÔ∏è Automatizaci√≥n</h3>
                <p class="text-purple-700 text-sm">Automatiza la creaci√≥n de anuncios</p>
            </div>
        </div>
        
        <div class="mt-8">
            <a href="{{ url_for('panel_cliente_meta_ads_bp.panel_automatizacion_campanas', nombre_nora=nombre_nora) }}" 
               class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                ‚öôÔ∏è Configurar Automatizaci√≥n
            </a>
        </div>
    </div>
</div>
{% endblock %}
```

### 3. Archivo `__init__.py`

```python
# clientes/aura/routes/panel_cliente_meta_ads/__init__.py
from .panel_cliente_meta_ads import panel_cliente_meta_ads_bp
from .webhooks_meta import webhooks_meta_bp
from .automatizacion_routes import automatizacion_routes_bp
from .webhooks_api import webhooks_api_bp

__all__ = [
    'panel_cliente_meta_ads_bp',
    'webhooks_meta_bp',
    'automatizacion_routes_bp',
    'webhooks_api_bp'
]
```

---

## ü§ñ Creaci√≥n autom√°tica de m√≥dulos

**Nora AI incluye un creador autom√°tico de m√≥dulos** en `/admin/modulos/crear` que genera toda la estructura:

### Lo que genera autom√°ticamente:
```python
# 1. Carpeta del m√≥dulo
clientes/aura/routes/panel_cliente_nuevo_modulo/

# 2. Archivo __init__.py con import
from .panel_cliente_nuevo_modulo import panel_cliente_nuevo_modulo_bp

# 3. Archivo Python principal con estructura completa
panel_cliente_nuevo_modulo_bp = Blueprint(
    "panel_cliente_nuevo_modulo_bp", __name__,
    url_prefix="/panel_cliente/<nombre_nora>/nuevo_modulo"
)

# 4. Template base
{% extends "base_cliente.html" %}
{% block contenido %}
<h1>üß© M√≥dulo: Nuevo Modulo</h1>
{% endblock %}

# 5. Registro en Supabase (modulos_disponibles)
# 6. Activaci√≥n autom√°tica para una Nora espec√≠fica
# 7. Actualizaci√≥n de esquemas de BD
```

### Proceso autom√°tico del creador (basado en creador_modulos.py):

```python
# ü§ñ L√ìGICA REAL DEL CREADOR AUTOM√ÅTICO

def crear_modulo_automatico():
    """Proceso completo basado en creador_modulos.py"""
    
    # 1. EXTRACCI√ìN DE NOMBRE_NORA (patr√≥n oficial)
    nombre_nora = request.path.split("/")[2]
    
    # 2. VALIDACI√ìN DE M√ìDULO
    if modulo_ya_existe(nombre_modulo):
        return {"error": "M√≥dulo ya existe"}
    
    # 3. CREAR ESTRUCTURA DE ARCHIVOS
    crear_carpeta_modulo(nombre_modulo)
    crear_archivo_principal(nombre_modulo)
    crear_template_base(nombre_modulo)
    crear_init_py(nombre_modulo)
    
    # 4. REGISTRO EN SUPABASE
    insertar_modulo_disponible(nombre_modulo, descripcion, icono)
    
    # 5. ACTIVACI√ìN AUTOM√ÅTICA
    activar_para_nora(nombre_modulo, nombre_nora)
    
    # 6. ACTUALIZAR ESQUEMAS
    ejecutar_generar_supabase_schema()
    
    return {"success": True, "modulo": nombre_modulo}
```

### Archivos generados autom√°ticamente:

#### 1. **Estructura de carpetas**:
```bash
# El creador genera esta estructura completa:
clientes/aura/routes/panel_cliente_{nombre_modulo}/
‚îú‚îÄ‚îÄ __init__.py                 # ‚úÖ Auto-generado
‚îú‚îÄ‚îÄ panel_cliente_{modulo}.py   # ‚úÖ Con Blueprint completo
‚îî‚îÄ‚îÄ README.md                   # ‚úÖ Documentaci√≥n b√°sica

clientes/aura/templates/panel_cliente_{nombre_modulo}/
‚îî‚îÄ‚îÄ index.html                  # ‚úÖ Template base funcional
```

#### 2. **Blueprint auto-generado**:
```python
# panel_cliente_{modulo}.py (generado autom√°ticamente)
from flask import Blueprint, render_template, request

"""
üìä SCHEMAS DE BD DISPONIBLES PARA ESTE M√ìDULO:

üí° TIP: Usa SUPABASE_SCHEMAS['{tabla}'] para verificar campos disponibles
üí° Ejemplo: SUPABASE_SCHEMAS['configuracion_bot']['modulos'] -> 'json'

üìã TABLAS COMUNES POR M√ìDULO:
‚Ä¢ configuracion_bot: SIEMPRE - Config y m√≥dulos activos de cada Nora
‚Ä¢ {modulo}_specific_tables: Seg√∫n el m√≥dulo que est√©s creando
‚Ä¢ logs_errores: Para logging de errores del m√≥dulo
‚Ä¢ usuarios_clientes: Si el m√≥dulo maneja permisos de usuarios

üîç VERIFICAR ANTES DE USAR:
from clientes.aura.utils.quick_schemas import existe, columnas
if existe('{tabla}'):
    campos = columnas('{tabla}')
    print(f"Campos disponibles: {campos}")
"""

panel_cliente_{modulo}_bp = Blueprint(
    "panel_cliente_{modulo}_bp", __name__,
    url_prefix="/panel_cliente/<nombre_nora>/{modulo}"
)

@panel_cliente_{modulo}_bp.route("/")
def panel_cliente_{modulo}():
    # üéØ PATR√ìN OFICIAL: extracci√≥n de nombre_nora
    nombre_nora = request.path.split("/")[2]
    
    # ‚úÖ VALIDACI√ìN BD: Verificar que la Nora existe
    from clientes.aura.utils.supabase_client import supabase
    config = supabase.table('configuracion_bot') \
        .select('modulos') \
        .eq('nombre_nora', nombre_nora) \
        .single() \
        .execute()
    
    if not config.data:
        return "Nora no encontrada", 404
    
    return render_template("panel_cliente_{modulo}/index.html", 
                         nombre_nora=nombre_nora)
```

#### 3. **Template auto-generado**:
```html
<!-- index.html (generado autom√°ticamente) -->
{% extends "base_cliente.html" %}

{% block titulo %}{icono} {nombre_formateado} - {{ nombre_nora|title }}{% endblock %}

{% block contenido %}
<div class="max-w-4xl mx-auto py-8">
    <div class="bg-white rounded-lg shadow-sm p-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">
            {icono} {nombre_formateado}
        </h1>
        
        <p class="text-gray-600 mb-6">
            {descripcion} para {{ nombre_nora|title }}.
        </p>
        
        <!-- Contenido del m√≥dulo aqu√≠ -->
        <div class="text-center py-8">
            <p class="text-gray-500">
                ‚ú® M√≥dulo creado autom√°ticamente
            </p>
        </div>
    </div>
</div>
{% endblock %}
```

#### 4. **Registro Supabase autom√°tico**:
```sql
-- Auto-ejecutado por el creador
INSERT INTO modulos_disponibles (nombre, descripcion, icono, ruta) VALUES 
('{nombre_modulo}', '{descripcion}', '{icono}', 'panel_cliente_{modulo}.panel_cliente_{modulo}_bp');

-- Auto-activaci√≥n para la Nora actual
UPDATE configuracion_bot 
SET modulos = jsonb_set(modulos, '{{"{modulo}"}}', 'true', true)
WHERE nombre_nora = '{nombre_nora}';
```

#### 5. **Actualizaci√≥n autom√°tica de esquemas**:
```python
# Auto-ejecutado al final del proceso
import subprocess
subprocess.run(['python', 'generar_supabase_schema.py'], check=True)
print("‚úÖ Esquemas de BD actualizados autom√°ticamente")
```

### üéØ Ventajas de la creaci√≥n autom√°tica:

1. **Consistencia total** - Todos los m√≥dulos siguen el mismo patr√≥n
2. **Sin errores manuales** - Blueprint, templates y BD se configuran correctamente
3. **Inmediatamente funcional** - El m√≥dulo aparece activado en el panel
4. **Patrones oficiales** - Usa `request.path.split("/")[2]` para nombre_nora
5. **Actualizaci√≥n de esquemas** - BD schemas actualizados autom√°ticamente

üí° **Resultado**: M√≥dulo 100% funcional en segundos, sin intervenci√≥n manual.

## ÔøΩ Schemas de BD como regla obligatoria

### üéØ **REGLA OFICIAL**: Todo m√≥dulo debe documentar sus schemas

**En CADA archivo Python del m√≥dulo**, incluir este header:

```python
"""
üìä SCHEMAS DE BD QUE USA ESTE ARCHIVO:

üìã TABLAS PRINCIPALES:
‚Ä¢ {tabla_principal}: {descripcion_breve}
  ‚îî Campos clave: {campo1}, {campo2}, {campo3}
  
‚Ä¢ {tabla_secundaria}: {descripcion_breve}  
  ‚îî Campos clave: {campo1}, {campo2}

üîó RELACIONES:
‚Ä¢ {tabla_a} -> {tabla_b} via {campo_relacion}

üí° VERIFICAR SCHEMAS:
from clientes.aura.utils.supabase_schemas import SUPABASE_SCHEMAS
from clientes.aura.utils.quick_schemas import existe, columnas

if existe('mi_tabla'):
    campos = columnas('mi_tabla')
    tipo_campo = SUPABASE_SCHEMAS['mi_tabla']['mi_campo']
"""
```

### ‚úÖ Ejemplo real - M√≥dulo Meta Ads:

```python
"""
üìä SCHEMAS DE BD QUE USA ESTE ARCHIVO:

üìã TABLAS PRINCIPALES:
‚Ä¢ meta_ads_anuncios_detalle: M√©tricas detalladas de cada anuncio
  ‚îî Campos clave: ad_id(string_numeric), clicks(integer), costo(numeric), alcance(integer)
  
‚Ä¢ meta_ads_cuentas: Cuentas publicitarias conectadas
  ‚îî Campos clave: id_cuenta_publicitaria(text), nombre_cliente(text), conectada(boolean)
  
‚Ä¢ meta_ads_reportes_semanales: Reportes consolidados semanales
  ‚îî Campos clave: empresa_id(text), fecha_inicio(date), importe_gastado_anuncios(numeric)
  
‚Ä¢ facebook_paginas: P√°ginas de Facebook vinculadas
  ‚îî Campos clave: page_id(string_numeric), nombre_pagina(text), activa(boolean)

üîó RELACIONES:
‚Ä¢ meta_ads_cuentas -> meta_ads_anuncios_detalle via id_cuenta_publicitaria
‚Ä¢ facebook_paginas -> meta_publicaciones_webhook via page_id
‚Ä¢ configuracion_bot -> TODOS via nombre_nora

üí° VERIFICAR SCHEMAS:
from clientes.aura.utils.quick_schemas import existe, columnas
if existe('meta_ads_anuncios_detalle'):
    campos = columnas('meta_ads_anuncios_detalle')
    # Resultado: ['ad_id', 'clicks', 'costo', 'alcance', ...]
"""
```

### üõ†Ô∏è Herramientas disponibles:

#### 1. **`supabase_schemas.py`** - Schema completo:
```python
from clientes.aura.utils.supabase_schemas import SUPABASE_SCHEMAS

# Ver estructura completa de una tabla
print(SUPABASE_SCHEMAS['meta_ads_anuncios_detalle'])
# {'ad_id': 'string_numeric', 'clicks': 'integer', 'costo': 'numeric', ...}
```

#### 2. **`quick_schemas.py`** - Verificaci√≥n r√°pida:
```python
from clientes.aura.utils.quick_schemas import existe, columnas

# Verificar si tabla existe
if existe('mi_tabla'):
    print("‚úÖ Tabla existe")
    
# Ver solo nombres de columnas
campos = columnas('mi_tabla') 
print(f"Campos: {campos}")
```

### üö´ **PROHIBIDO**: Inventar tablas

```python
# ‚ùå MAL - Tabla inventada
result = supabase.table('inventario_productos').select('*').execute()

# ‚úÖ BIEN - Verificar primero
from clientes.aura.utils.quick_schemas import existe
if existe('inventario_productos'):
    result = supabase.table('inventario_productos').select('*').execute()
else:
    print("‚ùå Tabla 'inventario_productos' no existe")
    # Usar tabla alternativa o crear la tabla primero
```

### üìã **Template para nuevos m√≥dulos**:

```python
# Al inicio de CADA archivo Python del m√≥dulo:

"""
üìä SCHEMAS DE BD QUE USA ESTE ARCHIVO:

üìã TABLAS PRINCIPALES:
‚Ä¢ configuracion_bot: Config de cada Nora (OBLIGATORIO EN TODOS LOS M√ìDULOS)
  ‚îî Campos: nombre_nora(text), modulos(json), ia_activa(boolean)

‚Ä¢ [AGREGAR TABLAS ESPEC√çFICAS DEL M√ìDULO AQU√ç]

üîó RELACIONES:
‚Ä¢ configuracion_bot es el centro - filtra por nombre_nora SIEMPRE

üí° VERIFICACI√ìN OBLIGATORIA:
from clientes.aura.utils.quick_schemas import existe, columnas
# Verificar cada tabla antes de usar
"""

from flask import Blueprint, render_template, request
from clientes.aura.utils.supabase_client import supabase
from clientes.aura.utils.supabase_schemas import SUPABASE_SCHEMAS
from clientes.aura.utils.quick_schemas import existe, columnas

# Resto del c√≥digo...
```

### üéØ **Ventajas de esta regla**:

1. **No m√°s errores** por tablas inexistentes
2. **Documentaci√≥n autom√°tica** de dependencias  
3. **Onboarding r√°pido** para nuevos desarrolladores
4. **Refactoring seguro** - sabes qu√© tablas usa cada m√≥dulo
5. **GitHub Copilot inteligente** - entiende tu contexto de BD

Para m√≥dulos con mucha funcionalidad como `meta_ads`:

```bash
clientes/aura/routes/panel_cliente_meta_ads/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ panel_cliente_meta_ads.py        # Blueprint principal
‚îú‚îÄ‚îÄ automatizaciones.py             # Sub-blueprint: automatizaciones
‚îú‚îÄ‚îÄ automatizacion_routes.py        # Sub-blueprint: rutas de automatizaci√≥n
‚îú‚îÄ‚îÄ campanas.py                     # Sub-blueprint: campa√±as
‚îú‚îÄ‚îÄ reportes.py                     # Sub-blueprint: reportes
‚îú‚îÄ‚îÄ estadisticas.py                 # Sub-blueprint: estad√≠sticas
‚îú‚îÄ‚îÄ webhooks_meta.py                # Sub-blueprint: webhooks Meta
‚îú‚îÄ‚îÄ webhooks_api.py                 # Sub-blueprint: API webhooks
‚îî‚îÄ‚îÄ sincronizador.py                # Sub-blueprint: sincronizaci√≥n
```

## üé® Templates organizados:

```bash
clientes/aura/templates/panel_cliente_meta_ads/
‚îú‚îÄ‚îÄ index.html                      # P√°gina principal
‚îú‚îÄ‚îÄ automatizacion.html             # Configuraci√≥n automatizaci√≥n
‚îú‚îÄ‚îÄ reportes.html                   # Reportes de campa√±as
‚îú‚îÄ‚îÄ campanas_meta_ads.html          # Lista de campa√±as
‚îú‚îÄ‚îÄ audiencias_meta_ads.html        # Gesti√≥n de audiencias
‚îú‚îÄ‚îÄ estadisticas_ads.html           # Estad√≠sticas detalladas
‚îú‚îÄ‚îÄ webhooks.html                   # Configuraci√≥n webhooks
‚îú‚îÄ‚îÄ sincronizacion_manual.html      # Sincronizaci√≥n manual
‚îî‚îÄ‚îÄ lab.html                        # Laboratorio de pruebas
```

## üìÅ Archivos est√°ticos separados:

**‚ö†Ô∏è IMPORTANTE**: Nunca meter JavaScript o CSS directamente en los templates HTML.

### Estructura de archivos est√°ticos:
```bash
static/
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ panel_cliente.css           # CSS general
‚îÇ   ‚îî‚îÄ‚îÄ modulos/
‚îÇ       ‚îî‚îÄ‚îÄ meta_ads/
‚îÇ           ‚îú‚îÄ‚îÄ main.css           # CSS principal del m√≥dulo
‚îÇ           ‚îú‚îÄ‚îÄ automatizacion.css # CSS espec√≠fico de automatizaci√≥n
‚îÇ           ‚îî‚îÄ‚îÄ reportes.css       # CSS espec√≠fico de reportes
‚îî‚îÄ‚îÄ js/
    ‚îú‚îÄ‚îÄ panel_cliente.js            # JS general
    ‚îî‚îÄ‚îÄ modulos/
        ‚îî‚îÄ‚îÄ meta_ads/
            ‚îú‚îÄ‚îÄ main.js            # JS principal del m√≥dulo
            ‚îú‚îÄ‚îÄ automatizacion.js  # JS espec√≠fico de automatizaci√≥n
            ‚îî‚îÄ‚îÄ reportes.js        # JS espec√≠fico de reportes
```

### ‚ö†Ô∏è **REGLA CR√çTICA**: VERIFICAR BLOQUES DEL TEMPLATE BASE

**ANTES** de crear cualquier template, **VERIFICAR** qu√© bloques est√°n disponibles en `base_cliente.html`:

```python
# 1. SIEMPRE leer base_cliente.html primero
from_file('clientes/aura/templates/base_cliente.html')

# 2. Identificar bloques disponibles
# BLOQUES REALES EN base_cliente.html:
# - {% block head_extra %}    ‚Üê Para CSS adicional
# - {% block contenido %}     ‚Üê Para contenido principal  
# - {% block scripts %}       ‚Üê Para JavaScript adicional

# 3. NO inventar bloques que no existen
```

### ‚úÖ **Template CORRECTO** (bloques verificados):
```html
{% extends "base_cliente.html" %}

{% block titulo %}üìä Meta Ads - {{ nombre_nora|title }}{% endblock %}

<!-- ‚úÖ CORRECTO: usar head_extra (existe en base_cliente.html) -->
{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modulos/meta_ads/main.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modulos/meta_ads/automatizacion.css') }}">
{% endblock %}

{% block contenido %}
<!-- HTML aqu√≠ -->
{% endblock %}

<!-- ‚úÖ CORRECTO: usar scripts (existe en base_cliente.html) -->
{% block scripts %}
<script src="{{ url_for('static', filename='js/modulos/meta_ads/main.js') }}"></script>
<script src="{{ url_for('static', filename='js/modulos/meta_ads/automatizacion.js') }}"></script>
{% endblock %}
```

### ‚ùå **Template INCORRECTO** (bloques inventados):
```html
{% extends "base_cliente.html" %}

<!-- ‚ùå ERROR: estilos_adicionales NO existe en base_cliente.html -->
{% block estilos_adicionales %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modulos/meta_ads/main.css') }}">
{% endblock %}

<!-- ‚ùå ERROR: scripts_adicionales NO existe en base_cliente.html -->
{% block scripts_adicionales %}
<script src="{{ url_for('static', filename='js/modulos/meta_ads/main.js') }}"></script>
{% endblock %}
```

### üîç **Proceso de verificaci√≥n obligatorio**:

```bash
# 1. Antes de crear template, verificar bloques disponibles
grep -n "{% block" clientes/aura/templates/base_cliente.html

# 2. Solo usar bloques que existen
# 3. Si necesitas bloques adicionales, modificar base_cliente.html primero
```

### ‚ùå **NO hacer esto** (JavaScript inline):
```html
<!-- ‚ùå MAL - JavaScript en el HTML -->
<script>
function cargarDatos() {
    fetch('/api/datos')
        .then(response => response.json())
        .then(data => console.log(data));
}
</script>
```

### ‚úÖ **S√ç hacer esto** (JavaScript separado):
```html
<!-- ‚úÖ BIEN - JavaScript externo -->
<script src="{{ url_for('static', filename='js/modulos/meta_ads/main.js') }}"></script>
```

Y en `static/js/modulos/meta_ads/main.js`:
```javascript
// Funciones del m√≥dulo Meta Ads
function cargarDatos() {
    fetch('/api/datos')
        .then(response => response.json())
        .then(data => console.log(data));
}

// Inicializar cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
    cargarDatos();
});
```

## üîó Enlaces entre templates:

```html
<!-- Navegaci√≥n dentro del m√≥dulo -->
<nav class="mb-6">
    <a href="{{ url_for('panel_cliente_meta_ads_bp.panel_cliente_meta_ads', nombre_nora=nombre_nora) }}"
       class="text-blue-600 hover:text-blue-800">
        üè† Inicio
    </a>
    |
    <a href="{{ url_for('panel_cliente_meta_ads_bp.panel_automatizacion_campanas', nombre_nora=nombre_nora) }}"
       class="text-blue-600 hover:text-blue-800">
        ‚öôÔ∏è Automatizaci√≥n
    </a>
    |
    <a href="{{ url_for('panel_cliente_meta_ads_bp.reportes_meta_ads', nombre_nora=nombre_nora) }}"
       class="text-blue-600 hover:text-blue-800">
        üìä Reportes
    </a>
</nav>
```

## ‚ö†Ô∏è Errores comunes:

1. **Nombre inconsistente**:
   ```python
   # ‚ùå MAL - Nombres no coinciden
   Blueprint("meta_ads_bp", __name__, ...)  # nombre diferente
   
   # ‚úÖ BIEN - Nombres consistentes
   Blueprint("panel_cliente_meta_ads_bp", __name__, ...)
   ```

2. **Templates en lugar incorrecto**:
   ```bash
   # ‚ùå MAL
   templates/meta_ads/index.html
   
   # ‚úÖ BIEN
   templates/panel_cliente_meta_ads/index.html
   ```

3. **Import incorrecto en __init__.py**:
   ```python
   # ‚ùå MAL - Import directo del archivo
   from panel_cliente_meta_ads import panel_cliente_meta_ads_bp
   
   # ‚úÖ BIEN - Import relativo
   from .panel_cliente_meta_ads import panel_cliente_meta_ads_bp
   ```

4. **JavaScript/CSS inline en templates**:
   ```html
   <!-- ‚ùå MAL - JavaScript inline -->
   <script>
   function miFuncion() { ... }
   </script>
   
   <!-- ‚ùå MAL - CSS inline -->
   <style>
   .mi-clase { color: red; }
   </style>
   ```
   
   ```html
   <!-- ‚úÖ BIEN - Archivos externos -->
   <link rel="stylesheet" href="{{ url_for('static', filename='css/modulos/meta_ads/main.css') }}">
   <script src="{{ url_for('static', filename='js/modulos/meta_ads/main.js') }}"></script>
   ```

5. **Archivos est√°ticos en lugar incorrecto**:
   ```bash
   # ‚ùå MAL
   static/meta_ads.js
   static/meta_ads.css
   
   # ‚úÖ BIEN
   static/js/modulos/meta_ads/main.js
   static/css/modulos/meta_ads/main.css
   ```
