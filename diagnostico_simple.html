<!DOCTYPE html>
<html>
<head>
    <title>üîß Diagn√≥stico Simple - Panel Entrenamiento</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">üîß Diagn√≥stico Simple - Panel Entrenamiento</h1>
        
        <!-- Estado JavaScript -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">üìä Estado JavaScript</h2>
            <div id="js-status" class="space-y-2"></div>
        </div>
        
        <!-- Pruebas de Funciones -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">üéØ Pruebas de Funciones</h2>
            <div class="space-x-4">
                <button onclick="testSimple()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    Test Simple
                </button>
                <button onclick="testCargarConocimiento()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    Test cargarConocimiento
                </button>
            </div>
        </div>
        
        <!-- Log -->
        <div class="bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-4">üìù Log</h2>
            <div id="log" class="bg-gray-50 p-4 rounded border h-64 overflow-y-auto font-mono text-sm"></div>
        </div>
    </div>

    <!-- Configuraci√≥n b√°sica -->
    <script>
    // Configuraci√≥n m√≠nima
    window.PANEL_CONFIG = {
        nombreNora: 'test',
        endpoints: {
            bloques: '/panel_cliente/test/entrenar/bloques'
        },
        limits: {
            maxContentLength: 500,
            maxTags: 10
        }
    };
    
    // Logging
    const originalLog = console.log;
    const originalError = console.error;
    
    function logToUI(message, type = 'log') {
        const logDiv = document.getElementById('log');
        const timestamp = new Date().toLocaleTimeString();
        const color = type === 'error' ? 'text-red-600' : type === 'warn' ? 'text-yellow-600' : 'text-gray-700';
        logDiv.innerHTML += `<div class="${color}">[${timestamp}] ${message}</div>`;
        logDiv.scrollTop = logDiv.scrollHeight;
    }
    
    console.log = function(...args) {
        originalLog.apply(console, args);
        logToUI(args.join(' '), 'log');
    };
    
    console.error = function(...args) {
        originalError.apply(console, args);
        logToUI('ERROR: ' + args.join(' '), 'error');
    };
    </script>

    <!-- Cargar JS -->
    <script src="/static/js/ui-utils.js"></script>
    <script src="/static/js/conocimiento-manager.js"></script>
    <script src="/static/js/form-handlers.js"></script>
    <script src="/static/js/panel-entrenamiento-core.js"></script>

    <script>
    function updateJSStatus() {
        const status = document.getElementById('js-status');
        status.innerHTML = `
            <div><strong>window.PANEL_CONFIG:</strong> ${!!window.PANEL_CONFIG ? '‚úÖ Configurado' : '‚ùå No encontrado'}</div>
            <div><strong>cargarConocimiento:</strong> ${typeof window.cargarConocimiento === 'function' ? '‚úÖ Disponible' : '‚ùå No encontrada'}</div>
            <div><strong>agregarBloque:</strong> ${typeof window.agregarBloque === 'function' ? '‚úÖ Disponible' : '‚ùå No encontrada'}</div>
            <div><strong>mostrarToast:</strong> ${typeof window.mostrarToast === 'function' ? '‚úÖ Disponible' : '‚ùå No encontrada'}</div>
            <div><strong>conocimientoData:</strong> ${typeof window.conocimientoData !== 'undefined' ? `‚úÖ Definida (${window.conocimientoData ? window.conocimientoData.length : 0} items)` : '‚ùå No definida'}</div>
        `;
    }

    function testSimple() {
        console.log('üß™ Test Simple iniciado...');
        console.log('‚úÖ JavaScript funcionando correctamente');
        alert('‚úÖ Test Simple exitoso!');
    }

    async function testCargarConocimiento() {
        console.log('üß™ Testing cargarConocimiento...');
        try {
            if (typeof window.cargarConocimiento === 'function') {
                console.log('‚úÖ cargarConocimiento encontrada, ejecutando...');
                await window.cargarConocimiento();
                console.log('‚úÖ cargarConocimiento ejecutada sin errores');
            } else {
                console.error('‚ùå cargarConocimiento no est√° definida');
                console.log('üîç Funciones disponibles en window:', Object.keys(window).filter(k => k.includes('cargar')));
            }
        } catch (error) {
            console.error('‚ùå Error en cargarConocimiento:', error);
        }
        updateJSStatus();
    }

    // Actualizar estado inicial
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üìã P√°gina de diagn√≥stico cargada');
        setTimeout(updateJSStatus, 1000);
    });
    </script>
</body>
</html>
