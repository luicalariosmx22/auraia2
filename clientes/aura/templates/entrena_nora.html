<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Entrenamiento de Nora</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/entrena_nora.css') }}">
    <style>
        .btn-neutral {
            display: inline-block;
            background-color: #3498db;
            color: #fff;
            text-decoration: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
            transition: background 0.2s;
        }

        .btn-neutral:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">🧠 Nora AI</div>
        <div class="logout">
            <a href="{{ url_for('logout') }}">Cerrar sesión</a>
        </div>
    </header>

    <main>
        <h1>⚙️ Entrenamiento de Nora: <strong>{{ nombre_nora }}</strong></h1>

        <section class="entrena-modulos">

            <!-- 1. Activar o desactivar IA -->
            <div class="modulo">
                <h2>🔌 Activar o desactivar la Inteligencia Artificial</h2>
                <form action="{{ url_for('estado_ia', nombre_nora=nombre_nora) }}" method="POST">
                    <label>
                        <input type="checkbox" name="ia_activa" value="true" {% if config.ia_activa %}checked{% endif %}>
                        Activar IA (desactívala si quieres responder manualmente)
                    </label>
                    <button type="submit">Guardar estado</button>
                </form>
            </div>

            <!-- 2. Cambiar nombre -->
            <div class="modulo">
                <h2>✏️ Cambiar el nombre de Nora</h2>
                <form action="{{ url_for('cambiar_nombre', nombre_nora=nombre_nora) }}" method="POST">
                    <input type="text" name="nuevo_nombre" value="{{ nombre_nora }}" required>
                    <button type="submit">Actualizar nombre</button>
                </form>
            </div>

            <!-- 3. Personalidad -->
            <div class="modulo">
                <h2>🎭 Personalidad</h2>
                <form action="{{ url_for('personalidad', nombre_nora=nombre_nora) }}" method="POST">
                    <textarea name="personalidad" rows="4" placeholder="Ej: Amable, profesional, tono relajado...">{{ config.personalidad or '' }}</textarea>
                    <button type="submit">Guardar personalidad</button>
                </form>
            </div>

            <!-- 4. Instrucciones clave -->
            <div class="modulo">
                <h2>📋 Instrucciones clave</h2>
                <form action="{{ url_for('instrucciones', nombre_nora=nombre_nora) }}" method="POST">
                    <textarea name="instrucciones" rows="5" placeholder="Ej: Nunca compartas enlaces externos, siempre pide el nombre, etc...">{{ config.instrucciones or '' }}</textarea>
                    <button type="submit">Guardar instrucciones</button>
                </form>
            </div>

            <!-- 5. Centro de conocimiento -->
            <div class="modulo">
                <h2>📚 Centro de conocimiento</h2>
                <form action="{{ url_for('guardar_conocimiento', nombre_nora=nombre_nora) }}" method="POST">
                    <textarea name="base_conocimiento" rows="8" placeholder="Agrega información que Nora debe saber para responder en WhatsApp...">{{ config.base_conocimiento or '' }}</textarea>
                    <button type="submit">Guardar conocimiento</button>
                </form>
            </div>

            <!-- 6. Editar base de conocimiento -->
            <div class="modulo">
                <h2>📚 Editar base de conocimiento</h2>
                <p>Consulta y edita las respuestas que Nora usará para contestar automáticamente en WhatsApp.</p>
                <a href="{{ url_for('editar_conocimiento', nombre_nora=nombre_nora) }}" class="btn-neutral">Ir al editor de conocimiento</a>
            </div>
        </section>
    </main>
</body>
</html>