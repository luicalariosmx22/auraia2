{% extends "base_cliente.html" %}

{% block contenido %}
<div class="max-w-4xl mx-auto px-4 py-6">
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold text-gray-900 flex items-center gap-2">
        ‚úèÔ∏è Editar Curso
      </h1>
      <p class="text-gray-600 mt-1">{{ curso.titulo }}</p>
    </div>
    <a href="{{ url_for('panel_cliente_cursos.detalle_curso', nombre_nora=nombre_nora, curso_id=curso.id) }}" 
       class="text-gray-600 hover:text-blue-600 transition duration-150">
      ‚Üê Volver al detalle
    </a>
  </div>

  <!-- Formulario -->
  <div class="bg-white rounded-xl shadow-lg border border-gray-100">
    <div class="px-6 py-4 border-b border-gray-200">
      <h2 class="text-xl font-semibold text-gray-900">Informaci√≥n del Curso</h2>
    </div>
    
    <form method="POST" class="p-6 space-y-6">
      <!-- Informaci√≥n b√°sica -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            T√≠tulo del Curso *
          </label>
          <input type="text" name="titulo" required value="{{ curso.titulo }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="Ej: Curso de Marketing Digital">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Instructor
          </label>
          <input type="text" name="instructor" value="{{ curso.instructor or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="Nombre del instructor">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Descripci√≥n *
        </label>
        <textarea name="descripcion" required rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                  placeholder="Describe el curso, sus beneficios y a qui√©n est√° dirigido">{{ curso.descripcion }}</textarea>
      </div>

      <!-- Clasificaci√≥n -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Categor√≠a
          </label>
          <select name="categoria"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150">
            <option value="">Seleccionar categor√≠a</option>
            <option value="tecnologia" {{ 'selected' if curso.categoria == 'tecnologia' }}>Tecnolog√≠a</option>
            <option value="marketing" {{ 'selected' if curso.categoria == 'marketing' }}>Marketing</option>
            <option value="negocios" {{ 'selected' if curso.categoria == 'negocios' }}>Negocios</option>
            <option value="diseno" {{ 'selected' if curso.categoria == 'diseno' }}>Dise√±o</option>
            <option value="idiomas" {{ 'selected' if curso.categoria == 'idiomas' }}>Idiomas</option>
            <option value="salud" {{ 'selected' if curso.categoria == 'salud' }}>Salud y Bienestar</option>
            <option value="arte" {{ 'selected' if curso.categoria == 'arte' }}>Arte y Creatividad</option>
            <option value="ciencias" {{ 'selected' if curso.categoria == 'ciencias' }}>Ciencias</option>
            <option value="otros" {{ 'selected' if curso.categoria == 'otros' }}>Otros</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Nivel
          </label>
          <select name="nivel"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150">
            <option value="">Seleccionar nivel</option>
            <option value="principiante" {{ 'selected' if curso.nivel == 'principiante' }}>Principiante</option>
            <option value="intermedio" {{ 'selected' if curso.nivel == 'intermedio' }}>Intermedio</option>
            <option value="avanzado" {{ 'selected' if curso.nivel == 'avanzado' }}>Avanzado</option>
            <option value="todos" {{ 'selected' if curso.nivel == 'todos' }}>Todos los niveles</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Modalidad
          </label>
          <select name="modalidad"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150">
            <option value="">Seleccionar modalidad</option>
            <option value="presencial" {{ 'selected' if curso.modalidad == 'presencial' }}>Presencial</option>
            <option value="online" {{ 'selected' if curso.modalidad == 'online' }}>Online</option>
            <option value="hibrido" {{ 'selected' if curso.modalidad == 'hibrido' }}>H√≠brido</option>
            <option value="autodirigido" {{ 'selected' if curso.modalidad == 'autodirigido' }}>Autodirigido</option>
          </select>
        </div>
      </div>

      <!-- Detalles del curso -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Duraci√≥n (horas)
          </label>
          <input type="number" name="duracion_horas" min="0" step="0.5" value="{{ curso.duracion_horas or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="0">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Precio
          </label>
          <input type="number" name="precio" min="0" step="0.01" value="{{ curso.precio or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="0.00">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            üí∞ Precio Pronto Pago
          </label>
          <input type="number" name="precio_pronto_pago" min="0" step="0.01" value="{{ curso.precio_pronto_pago or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="0.00">
          <p class="text-sm text-gray-500 mt-1">Precio especial para pagos realizados en las primeras 48 horas</p>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            M√°ximo Estudiantes
          </label>
          <input type="number" name="max_estudiantes" min="1" value="{{ curso.max_estudiantes or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="Sin l√≠mite">
        </div>
      </div>

      <!-- Fechas y Ubicaci√≥n -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Fecha de Inicio
          </label>
          <input type="date" name="fecha_inicio" value="{{ curso.fecha_inicio }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Fecha de Finalizaci√≥n
          </label>
          <input type="date" name="fecha_fin" value="{{ curso.fecha_fin }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150">
        </div>
      </div>

      <!-- Ubicaci√≥n (para cursos presenciales) -->
      <div id="ubicacion-section" class="space-y-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            üìç Direcci√≥n del Curso
          </label>
          <input type="text" name="direccion" value="{{ curso.direccion or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="Ej: Av. Principal 123, Col. Centro, Ciudad, Estado">
          <p class="text-sm text-gray-500 mt-1">Direcci√≥n completa donde se impartir√° el curso presencial</p>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            üó∫Ô∏è Link de Google Maps
          </label>
          <input type="url" name="google_maps_link" value="{{ curso.google_maps_link or '' }}"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                 placeholder="https://maps.google.com/...">
          <p class="text-sm text-gray-500 mt-1">Link directo a Google Maps para facilitar la ubicaci√≥n</p>
        </div>
      </div>

      <!-- Horarios por d√≠a -->
      <div class="space-y-6">
        <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
          üïê Horarios del Curso
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Lunes -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Lunes</label>
            <input type="text" name="horario_lunes" value="{{ curso.horario_lunes or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- Martes -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Martes</label>
            <input type="text" name="horario_martes" value="{{ curso.horario_martes or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- Mi√©rcoles -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Mi√©rcoles</label>
            <input type="text" name="horario_miercoles" value="{{ curso.horario_miercoles or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- Jueves -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Jueves</label>
            <input type="text" name="horario_jueves" value="{{ curso.horario_jueves or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- Viernes -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Viernes</label>
            <input type="text" name="horario_viernes" value="{{ curso.horario_viernes or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- S√°bado -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">S√°bado</label>
            <input type="text" name="horario_sabado" value="{{ curso.horario_sabado or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
          
          <!-- Domingo -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Domingo</label>
            <input type="text" name="horario_domingo" value="{{ curso.horario_domingo or '' }}"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                   placeholder="Ej: 9:00 - 12:00">
          </div>
        </div>
        
        <p class="text-sm text-gray-500">
          üí° Ingresa los horarios en formato "HH:MM - HH:MM" o deja vac√≠o si no hay clases ese d√≠a
        </p>
      </div>

      <!-- Contenido detallado -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Contenido Detallado
        </label>
        <textarea name="contenido_detalle" rows="6"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                  placeholder="Describe los m√≥dulos, temas y actividades del curso">{{ curso.contenido_detalle or '' }}</textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Requisitos
          </label>
          <textarea name="requisitos" rows="4"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                    placeholder="Conocimientos previos, materiales necesarios, etc.">{{ curso.requisitos or '' }}</textarea>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Objetivos de Aprendizaje
          </label>
          <textarea name="objetivos" rows="4"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150"
                    placeholder="¬øQu√© aprender√°n los estudiantes?">{{ curso.objetivos or '' }}</textarea>
        </div>
      </div>

      <!-- Estado -->
      <div class="flex items-center">
        <input type="checkbox" name="activo" id="activo" {{ 'checked' if curso.activo }}
               class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
        <label for="activo" class="ml-2 block text-sm text-gray-900">
          Curso activo (visible para inscripciones)
        </label>
      </div>

      <!-- Botones -->
      <div class="flex items-center justify-end space-x-4 pt-6 border-t border-gray-200">
        <a href="{{ url_for('panel_cliente_cursos.detalle_curso', nombre_nora=nombre_nora, curso_id=curso.id) }}" 
           class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-150">
          Cancelar
        </a>
        <button type="submit" 
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-lg shadow transition duration-200">
          Guardar Cambios
        </button>
      </div>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const modalidadSelect = document.querySelector('select[name="modalidad"]');
    const ubicacionSection = document.getElementById('ubicacion-section');
    
    function toggleUbicacion() {
        const modalidad = modalidadSelect.value;
        if (modalidad === 'presencial' || modalidad === 'hibrido') {
            ubicacionSection.style.display = 'block';
            ubicacionSection.classList.remove('hidden');
        } else {
            ubicacionSection.style.display = 'none';
            ubicacionSection.classList.add('hidden');
        }
    }
    
    // Ejecutar al cargar la p√°gina
    toggleUbicacion();
    
    // Ejecutar cuando cambie la modalidad
    modalidadSelect.addEventListener('change', toggleUbicacion);
});
</script>
{% endblock %}
