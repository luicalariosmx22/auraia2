<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ nora.nombre }} - Nora AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
</head>
<body>
    <header>
        <div class="logo">ğŸ§  Nora AI</div>
        <div class="logout"><a href="/logout">Cerrar sesiÃ³n</a></div>
    </header>

    <nav class="sidebar">
        <ul>
            <li><a href="/admin">ğŸ  Panel</a></li>
            <li><a href="/admin/noras">ğŸ“‹ Ver Noraâ€™s</a></li>
        </ul>
    </nav>

    <main>
        <h1>Editar Nora: {{ nora.nombre }}</h1>

        {% with mensajes = get_flashed_messages() %}
            {% if mensajes %}
                <div class="flash">{{ mensajes[0] }}</div>
            {% endif %}
        {% endwith %}

        <form method="POST">
            <label>Nombre:</label>
            <input type="text" name="nombre" value="{{ nora.nombre }}" required>

            <label>TelÃ©fono:</label>
            <input type="text" name="telefono" value="{{ nora.telefono }}" required>

            <label>Estado:</label>
            <select name="estado">
                <option value="activo" {% if nora.estado == "activo" %}selected{% endif %}>ğŸŸ¢ Activo</option>
                <option value="inactivo" {% if nora.estado == "inactivo" %}selected{% endif %}>ğŸŸ¡ Inactivo</option>
                <option value="error" {% if nora.estado == "error" %}selected{% endif %}>ğŸ”´ Con errores</option>
            </select>

            <label>MÃ³dulos activos:</label>
            <div class="checkbox-group">
                {% set modulos_disponibles = ["ia", "categorias", "webhook", "citas"] %}
                {% for mod in modulos_disponibles %}
                    <label><input type="checkbox" name="modulos" value="{{ mod }}"
                        {% if mod in nora.modulos %}checked{% endif %}> {{ mod }}</label>
                {% endfor %}
            </div>

            <button type="submit">ğŸ’¾ Guardar cambios</button>
        </form>

        <hr>

        <h3>âš¡ Acciones rÃ¡pidas para {{ nora.nombre }}</h3>

        <ul>
            <li><a class="boton" href="{{ url_for('panel_cliente_contactos.ver_contactos', nombre_nora=nora.nombre|lower|replace(' ', '-') ) }}">ğŸ‘¥ Ver contactos</a></li>

            {% if 'ia' in nora.modulos %}
            <li><a class="boton gris" href="{{ url_for('panel_cliente_ia.control_ia', nombre_nora=nora.nombre|lower|replace(' ', '-') ) }}">ğŸ§  Control de IA</a></li>
            {% endif %}
        </ul>

        <p><a href="/admin/noras">â† Volver al listado</a></p>
    </main>
</body>
</html>
