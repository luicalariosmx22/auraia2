<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ nora.nombre }} - Nora AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
</head>
<body>
    <header>
        <div class="logo">🧠 Nora AI</div>
        <div class="logout"><a href="/logout">Cerrar sesión</a></div>
    </header>

    <nav class="sidebar">
        <ul>
            <li><a href="/admin">🏠 Panel</a></li>
            <li><a href="/admin/noras">📋 Ver Nora’s</a></li>
            <li><a href="/panel_cliente/contactos">📇 Contactos</a></li>
            <li><a href="/panel_cliente/ia">🧠 Control IA</a></li>
        </ul>
    </nav>

    <main>
        <h1>Editar Nora: {{ nora.nombre }}</h1>

        {% with mensajes = get_flashed_messages() %}
            {% if mensajes %}
                <div class="flash">{{ mensajes[0] }}</div>
            {% endif %}
        {% endwith %}

        <form method="POST">
            <label>Nombre:</label>
            <input type="text" name="nombre" value="{{ nora.nombre }}" required>

            <label>Teléfono:</label>
            <input type="text" name="telefono" value="{{ nora.telefono }}" required>

            <label>Estado:</label>
            <select name="estado">
                <option value="activo" {% if nora.estado == "activo" %}selected{% endif %}>🟢 Activo</option>
                <option value="inactivo" {% if nora.estado == "inactivo" %}selected{% endif %}>🟡 Inactivo</option>
                <option value="error" {% if nora.estado == "error" %}selected{% endif %}>🔴 Con errores</option>
            </select>

            <label>Módulos activos:</label>
            <div class="checkbox-group">
                {% set modulos_disponibles = ["ia", "categorias", "webhook", "citas"] %}
                {% for mod in modulos_disponibles %}
                    <label><input type="checkbox" name="modulos" value="{{ mod }}"
                        {% if mod in nora.modulos %}checked{% endif %}> {{ mod }}</label>
                {% endfor %}
            </div>

            <button type="submit">💾 Guardar cambios</button>
        </form>

        <hr>
        <div class="acciones-rapidas">
            <h3>⚡ Acciones rápidas para {{ nora.nombre }}</h3>
            <p><a href="/panel_cliente/contactos" class="boton">📇 Ver contactos</a></p>
            <p><a href="/panel_cliente/ia" class="boton">🔌 Control de IA</a></p>
        </div>

        <p><a href="/admin/noras">← Volver al listado</a></p>
    </main>
</body>
</html>
