<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Chat ‚Äì {{ nombre_nora }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/panel_chat.css') }}">
</head>
<body>

<h2>üí¨ Chat de Nora ‚Äì {{ nombre_nora }}</h2>

<div class="chat-contenedor">

    <!-- üì± Columna 1: Lista de contactos -->
    <div class="col-contactos">
        <input type="text" placeholder="üîç Buscar contacto..." class="buscador" id="buscador">
        <ul class="lista-contactos" id="lista-contactos">
            {% for c in contactos %}
            <li onclick="cargarChat('{{ c.numero }}')">
                <strong>{{ c.nombre }}</strong><br>
                <small>{{ c.numero }}</small><br>
                <span class="preview-msg">
                    {{ c.mensajes[-1].texto if c.mensajes|length > 0 else '' }}
                </span>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- üí¨ Columna 2: Chat -->
    <div class="col-chat">
        <div id="chat-area" class="chat-area">
            <p>Selecciona un contacto para comenzar a chatear.</p>
        </div>
        <form id="form-mensaje" onsubmit="enviarMensaje(event)">
            <input type="text" id="mensaje" placeholder="Escribe un mensaje..." autocomplete="off">
            <button type="submit">Enviar</button>
        </form>
    </div>

    <!-- ‚ÑπÔ∏è Columna 3: Info del contacto -->
    <div class="col-info">
        <div id="info-contacto">
            <p><strong>‚ÑπÔ∏è Info del contacto</strong></p>
            <p>Selecciona un contacto para ver detalles.</p>
        </div>
    </div>

</div>

<script src="{{ url_for('static', filename='js/panel_chat.js') }}"></script>
<script>
    const nombreNora = "{{ nombre_nora }}";
</script>
</body>
</html>
