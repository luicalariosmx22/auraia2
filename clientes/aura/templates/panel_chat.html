<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Chat ‚Äì {{ nombre_nora | default("Desconocida") }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/panel_chat.css') }}">
</head>
<body>

<h2>üí¨ Panel de Chat ‚Äì {{ nombre_nora | default("Desconocida") }}</h2>

<div class="chat-contenedor">

    <!-- üì± COLUMNA 1: Lista de contactos -->
    <div class="col-contactos">
        <div class="contactos-header">
            <input type="text" placeholder="üîç Buscar contacto..." class="buscador">
        </div>
        <ul class="lista-contactos">
            {% for c in contactos %}
            <li onclick="seleccionarChat('{{ c.get('numero', '') }}')">
                <strong>{{ c.get("nombre", "Sin nombre") }}</strong><br>
                <small>{{ c.get("numero", "Sin n√∫mero") }}</small><br>
                <span class="preview-msg">
                    {{ c.get("mensajes", [])[-1].get("texto") if c.get("mensajes") and c.get("mensajes")|length > 0 else '' }}
                </span>
            </li>
            {% else %}
            <li><em>No hay contactos disponibles.</em></li>
            {% endfor %}
        </ul>
    </div>

    <!-- üí¨ COLUMNA 2: Chat activo -->
    <div class="col-chat">
        <div id="chat-area">
            <p>Selecciona un contacto para comenzar a chatear.</p>
        </div>
    </div>

    <!-- ‚ÑπÔ∏è COLUMNA 3: Info del contacto -->
    <div class="col-info">
        <div id="info-contacto">
            <p><strong>‚ÑπÔ∏è Info del contacto</strong></p>
            <p>Selecciona un contacto para ver detalles.</p>
        </div>
    </div>

</div>

<script>
    function seleccionarChat(numero) {
        // üëâ En versiones siguientes, carga din√°micamente chat e info del contacto
        document.getElementById("chat-area").innerHTML = "<p>Cargando conversaci√≥n con " + numero + "...</p>";
        document.getElementById("info-contacto").innerHTML = "<p><strong>N√∫mero:</strong> " + numero + "<br><em>Detalles vendr√°n pronto...</em></p>";
    }
</script>

</body>
</html>
