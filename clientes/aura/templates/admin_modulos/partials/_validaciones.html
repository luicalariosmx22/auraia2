<div class="bg-white border rounded-xl shadow-sm p-6">
  <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">üîß Validaciones</h2>
  <ul class="space-y-4 text-sm text-gray-700">
    <!-- Archivo Principal -->
    <li>
      <div>
        <h3 class="text-sm font-medium text-gray-500">Archivo principal</h3>
        <p class="text-sm font-mono text-gray-900 mt-1">
          {{ modulo.nombre_archivo_principal or 'No definido' }}
        </p>
        {% if modulo.existe_archivo %}
          <span class="inline-block mt-2 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded">
            ‚úÖ Archivo encontrado
          </span>
        {% else %}
          <span class="inline-block mt-2 text-xs font-semibold text-red-700 bg-red-100 px-2 py-1 rounded">
            ‚ùå No se encontr√≥ el archivo
          </span>
        {% endif %}
      </div>
    </li>

    <!-- Resto de validaciones -->
    <li>üìÅ Carpeta backend: <strong>{{ '‚úÖ' if modulo.carpeta_backend else '‚ùå' }}</strong></li>
    <li class="flex flex-col gap-1">
      <div class="flex items-center">
        <span class="text-gray-800">üñºÔ∏è Template HTML:</span>
        {% if modulo.template_html %}
          <span class="ml-2 text-green-600">‚úÖ</span>
        {% else %}
          <span class="ml-2 text-red-600">‚ùå</span>
        {% endif %}
      </div>
      
      {% if modulo.template_html %}
        <div class="text-xs text-gray-600 pl-6">
          {% if modulo.templates_path %}
            <div>üìÅ <span class="font-mono">{{ modulo.templates_path }}</span></div>
          {% endif %}
          
          {% if modulo.templates_encontrados %}
            <div class="mt-1">
              {% for template in modulo.templates_encontrados[:3] %}
                <div class="font-mono">- {{ template }}</div>
              {% endfor %}
              {% if modulo.templates_encontrados|length > 3 %}
                <div>... y {{ modulo.templates_encontrados|length - 3 }} m√°s</div>
              {% endif %}
            </div>
          {% endif %}
          
          {% if modulo.templates_detectados_en_codigo %}
            <div class="mt-1 italic">Detectados en referencias del c√≥digo</div>
          {% endif %}
        </div>
      {% endif %}
    </li>
    <li>üìú Registrado en c√≥digo: <strong>{{ '‚úÖ' if modulo.registrado_codigo else '‚ùå' }}</strong></li>
    <li class="flex items-start gap-2">
      <span class="text-gray-800">üß≠ Ruta declarada:</span>
      {% if modulo.ruta_principal %}
        <a href="{{ modulo.ruta_principal }}" target="_blank" class="text-blue-600 hover:underline flex items-center gap-1">
          {{ modulo.ruta_principal }}
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </a>
      {% else %}
        <span class="text-red-600">‚ùå No se pudo determinar la ruta</span>
      {% endif %}
    </li>
    <li class="flex items-center justify-between">
      <span class="text-sm text-gray-600">üåê Ruta en Flask</span>
      {% if modulo.ruta_disponible %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">‚úÖ Registrada</span>
      {% else %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700">‚ùå No registrada</span>
      {% endif %}
    </li>
    <li>
      <span class="text-xs text-gray-500 font-mono">{{ modulo.ruta_esperada }}</span>
    </li>
    
    <!-- Indicador de respuesta HTTP -->
    <li class="space-y-2">
      <div class="flex items-center justify-between">
        <span class="text-sm text-gray-600">üåê Respuesta HTTP</span>
        {% if modulo.respuesta_http %}
          {% if modulo.respuesta_http == 200 %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
              ‚úÖ 200 OK
            </span>
          {% elif modulo.respuesta_http == 302 %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
              ‚ö†Ô∏è 302 Found
            </span>
          {% elif modulo.respuesta_http == 404 %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700">
              ‚ùå 404 No encontrada
            </span>
          {% else %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700">
              ‚ùå {{ modulo.respuesta_http }}
            </span>
          {% endif %}
        {% else %}
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700">
            ‚ÑπÔ∏è Sin respuesta
          </span>
        {% endif %}
      </div>

      {% if modulo.explicacion_http %}
        <div class="text-xs text-gray-600 italic pl-6">
          {{ modulo.explicacion_http }}
          {% if modulo.redirige_a %}
            <br>
            <span class="font-mono">‚Ü™Ô∏è {{ modulo.redirige_a }}</span>
          {% endif %}
        </div>
      {% endif %}
    </li>
  </ul>

  <!-- Secci√≥n de explicaciones IA -->
  {% if modulo.diagnostico_ia %}
  <div class="mt-6 border-t border-gray-200 pt-4">
    <h3 class="text-sm font-medium text-gray-700 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
      </svg>
      An√°lisis asistido por IA
    </h3>
    
    {% if modulo.diagnostico_ia.causa %}
      <div class="mt-2 bg-amber-50 rounded p-2 text-xs text-gray-700">
        <span class="font-semibold">Causa: </span>{{ modulo.diagnostico_ia.causa }}
      </div>
    {% endif %}
    
    {% if modulo.diagnostico_ia.solucion %}
      <div class="mt-2 bg-green-50 rounded p-2 text-xs text-gray-700">
        <span class="font-semibold">Soluci√≥n recomendada: </span>
        <div class="whitespace-pre-wrap font-mono text-xs mt-1">{{ modulo.diagnostico_ia.solucion }}</div>
      </div>
    {% endif %}
    
    <div class="mt-2">
      <button type="button" id="verAnalisisCompleto" class="text-xs text-blue-600 hover:underline">Ver an√°lisis completo</button>
      <div id="analisisCompleto" class="hidden mt-2 bg-gray-50 p-3 rounded text-xs whitespace-pre-wrap">
        {{ modulo.diagnostico_ia.analisis }}
      </div>
    </div>
  </div>
  {% endif %}

  {% if not modulo.diagnostico_ia and modulo.respuesta_http != 200 %}
    <div class="mt-4 text-center">
      <form method="POST" action="{{ url_for('verificador_modulos.diagnostico_ia', nombre_modulo=modulo.nombre) }}">
        <button type="submit" class="inline-flex items-center px-3 py-1 text-xs font-medium rounded border border-blue-300 bg-blue-50 text-blue-700 hover:bg-blue-100">
          <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
          </svg>
          Analizar con IA
        </button>
      </form>
    </div>
  {% endif %}
</div>
