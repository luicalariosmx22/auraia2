{% if modulo.diagnostico_404 %}
  <div class="bg-red-50 border border-red-200 p-4 rounded shadow-sm mt-6">
    <h3 class="font-semibold text-red-700 mb-2">üîç Diagn√≥stico para error 404</h3>
    <ul class="text-sm text-red-800 list-disc list-inside space-y-1">
      {% for causa in modulo.diagnostico_404 %}
        <li>{{ causa }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

{% if modulo.validacion and modulo.validacion.errores %}
  <div class="bg-yellow-50 border border-yellow-200 p-4 rounded shadow-sm mt-6">
    <h3 class="font-semibold text-yellow-800 mb-2">‚ö†Ô∏è Errores estructurales detectados</h3>
    <ul class="text-sm text-yellow-900 list-disc list-inside space-y-1">
      {% for error in modulo.validacion.errores %}
        {% if "Archivo no encontrado" in error %}
          <li>‚ùå <strong>Archivo principal ausente:</strong> No se encontr√≥ el archivo <code class="font-mono">panel_cliente_{{ modulo.nombre }}.py</code> en la carpeta del m√≥dulo.</li>
        {% elif "Blueprint" in error %}
          <li>‚ùå <strong>Falta definir Blueprint:</strong> El archivo principal no contiene una l√≠nea con <code>Blueprint(...)</code>.</li>
        {% elif "url_prefix" in error %}
          <li>‚ö†Ô∏è <strong>Falta url_prefix:</strong> La declaraci√≥n del Blueprint deber√≠a tener el par√°metro <code>url_prefix=f"/panel_cliente/&lt;nombre_nora&gt;/{{ modulo.nombre }}"</code>.</li>
        {% elif "render_template" in error %}
          <li>‚ö†Ô∏è <strong>No se encontr√≥ render_template:</strong> Ninguna vista est√° retornando una plantilla HTML.</li>
        {% else %}
          <li>‚ö†Ô∏è {{ error }}</li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endif %}

{% if modulo.validacion and modulo.validacion.ok %}
  <div class="bg-green-50 border border-green-200 rounded-xl shadow-md p-6">
    <h2 class="text-lg font-semibold text-green-800 flex items-center gap-2">‚úÖ M√≥dulo verificado correctamente</h2>
    <p class="text-sm text-green-700">No se detectaron errores en la estructura del m√≥dulo.</p>
  </div>
{% elif not modulo.validacion %}
  <div class="bg-yellow-50 border border-yellow-200 rounded-xl shadow-md p-6">
    <h2 class="text-lg font-semibold text-yellow-800 flex items-center gap-2">‚ö†Ô∏è Sin validaci√≥n</h2>
    <p class="text-sm text-yellow-700">No se pudo validar la estructura del m√≥dulo. Aseg√∫rate de que exista el archivo principal.</p>
  </div>
{% endif %}
