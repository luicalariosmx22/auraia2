<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Panel Entrenamiento - JS Externo</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-center">🧪 Test JS Externo - Panel Entrenamiento</h1>
        
        <!-- Botones de prueba -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">🔧 Pruebas de Funcionalidad</h2>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="scrollToSection('seccion-test')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                    Test scrollToSection
                </button>
                <button onclick="toggleExamples()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                    Test toggleExamples
                </button>
                <button onclick="showToast('Test toast!', 'success')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded">
                    Test showToast
                </button>
                <button onclick="checkAllFunctions()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
                    Verificar Funciones
                </button>
            </div>
        </div>

        <!-- Tabs de prueba -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">📑 Test de Tabs</h2>
            <div class="border-b border-gray-200 mb-4">
                <nav class="-mb-px flex space-x-8">
                    <button class="tab-button active py-2 px-1 border-b-2 border-teal-500 text-teal-600 font-medium text-sm" data-tab="tab1">
                        Tab 1
                    </button>
                    <button class="tab-button py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm" data-tab="tab2">
                        Tab 2
                    </button>
                    <button class="tab-button py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm" data-tab="tab3">
                        Tab 3
                    </button>
                </nav>
            </div>
            
            <div id="tab-tab1" class="tab-content">
                <p class="text-gray-700">✅ Contenido del Tab 1 - Activo por defecto</p>
            </div>
            <div id="tab-tab2" class="tab-content hidden">
                <p class="text-gray-700">✅ Contenido del Tab 2</p>
            </div>
            <div id="tab-tab3" class="tab-content hidden">
                <p class="text-gray-700">✅ Contenido del Tab 3</p>
            </div>
        </div>

        <!-- Contenedor de ejemplos para toggleExamples -->
        <div id="examples-container" class="hidden bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4">📝 Ejemplos (Oculto por defecto)</h2>
            <p class="text-gray-700">Este contenedor se muestra/oculta con toggleExamples()</p>
            <div id="example-arrow" style="transform: rotate(0deg);">➤</div>
        </div>

        <!-- Sección para scroll test -->
        <div id="seccion-test" class="bg-white rounded-lg shadow-lg p-6 mb-8 scroll-mt-24">
            <h2 class="text-xl font-semibold mb-4">🎯 Sección de Test</h2>
            <p class="text-gray-700">Esta es la sección objetivo para el test de scrollToSection()</p>
        </div>

        <!-- Console output -->
        <div class="bg-gray-900 text-green-400 rounded-lg p-4 font-mono text-sm">
            <div class="mb-2 font-semibold text-white">📊 Console Output:</div>
            <div id="console-output">Abre las herramientas de desarrollador para ver los logs...</div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="/static/js/panel-entrenamiento-core.js"></script>
    <script src="/static/js/ui-utils.js"></script>
    <script src="/static/js/conocimiento-manager.js"></script>
    <script src="/static/js/form-handlers.js"></script>

    <!-- Configuration Variables -->
    <script>
        // Global configuration passed from Jinja2 to JavaScript
        window.PANEL_CONFIG = {
            nombreNora: 'test',
            endpoints: {
                bloques: '/test/bloques',
                personalidad: '/test/personalidad',
                instrucciones: '/test/instrucciones',
                estadoIA: '/test/estado_ia',
                limites: '/test/limites',
                bienvenida: '/test/bienvenida'
            },
            limits: {
                maxContentLength: 500,
                maxTags: 10
            }
        };

        // Test function
        function checkAllFunctions() {
            const functions = ['scrollToSection', 'toggleExamples', 'showToast', 'initializeTabs'];
            const results = [];
            
            functions.forEach(fn => {
                const exists = typeof window[fn] === 'function';
                results.push(`${fn}: ${exists ? '✅' : '❌'}`);
                console.log(`${exists ? '✅' : '❌'} ${fn}:`, exists);
            });
            
            alert('Verificación de funciones:\n' + results.join('\n'));
        }
    </script>
</body>
</html>
